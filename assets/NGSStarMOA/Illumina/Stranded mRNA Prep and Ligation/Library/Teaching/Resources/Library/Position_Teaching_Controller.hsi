// {{{ 2 "IncludeGuard" "PragmaOnce"
#pragma once
// }} ""
#include "HSLExtensions\\File.hsl"
#include "HSLStrLib.hsl"
#include "HSLUtilLib2.hsl"
#include "HSLDevLib.hsl"
#include "Teaching\\Resources\\Library\\Teaching_Support.hs_"
#include "HSLSeqLib.hsl"
#include "HSLTipCountingLib.hsl"
#include "Teaching\\Resources\\Library\\Teaching_Global.hsl"
#include "Teaching\\Resources\\Library\\Movement_Controller.hs_"
#include "Teaching\\Resources\\Library\\HSL_LabEdit_CTR_FileValues.hsl"
#include "Teaching\\Resources\\Library\\HSL_LabEdit_LID_FileValues.hsl"
#include "Teaching\\Resources\\Library\\HSL_LabEdit_RCK_FileValues.hsl"
#include "Teaching\\Resources\\Library\\HSL_LabEdit_TML_FileValues.hsl"
#include "HSLExtensions\\Array.hsl"
#include "HSLDeckVisualize.hsl"
#include "Teaching\\Resources\\Library\\LabwareEdit_RCK.hs_"
#include "Labware Properties\\Labware_Property_Query.hs_"
#include "HSLExtensions\\Directory.hsl"
#include "HSLTimLib.hsl"
#include "Edit File Attributes\\EditFileAttributes.hs_"
#include "HSLLabwrAccess\\HSLLabwrAccess.hsl"
#include "HSLStatistics.hsl"
#include "Teaching\\Resources\\Library\\Status_Update_Controller.hs_"
/* {{ 2 "LibraryInsertLine" "" */ // }} ""
// {{ 2 "TemplateIncludeBlock" ""
#include "HSLMETEDLib.hs_"
#include "HSLMECCLib.hs_"
// }} ""
// {{{ 2 "LibraryNamespace" "Begin"
namespace POSITION_TEACHING_CONTROLLER {
// }} ""
/* {{ 2 "VariableInsertLine" "" */ // }} ""
// {{{ 2 "SubmethodForwardDeclaration" ""
function Abstract(  ) void ;
function ConfirmCurrentLabware( device & ML_STAR ) variable ;
function GetAllLabware( device & ML_STAR, variable & o_arr_Carriers[], variable & o_arr_Tips[], variable & o_arr_Plates[], variable & o_arr_DeckLabIDs[], variable & o_arr_GroupedPlates[] ) void ;
function GetLabwareInformation( variable i_str_LabwareID ) void ;
function GetTeachingNeedle( device & ML_STAR, variable & i_arr_UniqueTips[], variable i_str_EndButtonText ) variable ;
function MeasureLabwarePosition( device & ML_STAR, variable & o_flt_DeltaX, variable & o_flt_DeltaY, variable & o_flt_DeltaZ ) void ;
function ResetLabwareVisState( device & ML_STAR ) void ;
function SaveTheDeck( device & ML_STAR ) void ;
function SelectLabwareToTeach( device & ML_STAR, variable & i_arr_LabwareTaught[], variable & o_arr_LabwareToTeach[] ) variable ;
function SetVisStateOfLabwareAndTemplate( device & ML_STAR, variable i_str_LabwareID, variable i_int_VisState ) void ;
function UpdateLogFile( device & ML_STAR, variable i_flt_DeltaX, variable i_flt_DeltaY, variable i_flt_DeltaZ, variable & o_str_LogFilePath ) void ;
// }} ""
function _InitLibrary() {
// {{ 2 "AutoInitBlock" ""
TEACHING_SUPPORT::_InitLibrary();
MOVEMENT_CONTROLLER::_InitLibrary();
LABWAREEDIT_RCK::_InitLibrary();
LPQ::_InitLibrary();
EDITFILEATTRIBUTES::_InitLibrary();
STATUS_UPDATE_CONTROLLER::_InitLibrary();
// }} ""
}
function _ExitLibrary() {
// {{ 2 "AutoExitBlock" ""
TEACHING_SUPPORT::_ExitLibrary();
MOVEMENT_CONTROLLER::_ExitLibrary();
LABWAREEDIT_RCK::_ExitLibrary();
LPQ::_ExitLibrary();
EDITFILEATTRIBUTES::_ExitLibrary();
STATUS_UPDATE_CONTROLLER::_ExitLibrary();
// }} ""
}
// {{{ 5 "GetTeachingNeedle" "Begin"
function GetTeachingNeedle( device & ML_STAR, variable & i_arr_UniqueTips[], variable i_str_EndButtonText ) variable {
// }} ""
private variable flt_X_Coord;
private variable str_DeckLayoutName;
private variable flt_Y_Coord;
private variable bool_Selected1000uLTips;
private variable bool_Selected50uLTips;
private variable bool_Selected300uLSlimTips;
private variable str_SelectedTipType;
private variable str_SQL_Filter;
private variable bool_SelectedTeachingNeedles;
private variable bool_Selected300uLTips;
private variable a;
private variable bool_Selected10uLTips;
private variable str_CurrentCoord;
private variable str_TipLabID;
private variable str_PreviousCoord;
private variable int_TotalPositions;
private variable str_TipCounter;
private sequence seq_TipPickUp;
private file QueryFiles;
private variable arr_TipLabware[];
private dialog customDialog1418BC6B53054f43AC97832C9D184A83;
private variable bool_TeachingNeedles;
private variable bool_300uLSlimTips;
private variable bool_50uLTips;
private variable bool_300uLTips;
private variable retValueDialog;
private variable bool_1000uLTips;
private variable str_TeachingTipImageName;
private variable bool_10uLTips;
private variable str_TipPosID;
private variable i;
private variable int_TotalTipTypes;
private variable str_TipType;
private variable arr_UniqueTips[];
private variable str_ChannelPattern;
private variable int_ChIndex;
private variable arr_ChannelPattern[];
// {{ 5 "GetTeachingNeedle" "InitLocals"
// }} ""
// {{ 145 1 0 "b862019e_78bd_44a3_9682ae47b947f27b" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== GetTeachingNeedle - START"));
// }} ""
// {{ 146 1 0 "b1acf07d_9c1f_459d_a97abd5881bd04a1" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
retValueDialog = -1;
// }} ""
// {{ 147 1 0 "9ed20df1_f907_49b4_96d123655b38227d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_TeachingTipImageName = Translate("Teaching_Needle");
// }} ""
// {{ 148 1 0 "d6a9a4da_b08d_4f15_afd6a6bd18a59d59" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_SelectedTipType = Translate("Teaching Needles");
// }} ""
// {{ 149 1 0 "29ddc7ee_ad36_4ba3_9c218e47df077e24" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 150 1 0 "93ee709b_c625_4f5c_9df2ebbc774997cc" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_ChannelPattern = Translate("");
// }} ""
// {{ 151 1 0 "587f8981_7dca_44eb_951a0130e8f5a816" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_ChannelPattern.SetSize(0);
// }} ""
// {{ 152 1 0 "e7374f48_2856_412e_860ce67e8ad143d7" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(int_ChIndex = 0; int_ChIndex < STAR_TEACHING::INT::TOTAL_CHANNELS;)
{
int_ChIndex = int_ChIndex + 1;
// }} ""
// {{ 153 1 0 "436adfdf_daf5_4545_aab61c8240e9f2d1" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_ChannelPattern.AddAsLast(0);
// }} ""
// {{ 154 1 0 "e7374f48_2856_412e_860ce67e8ad143d7" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 155 1 0 "46382766_009f_466a_9a9e029a69a36d64" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_ChannelPattern.SetAt(STAR_TEACHING::INT::WORKING_CHANNEL-1, 1);
// }} ""
// {{ 156 1 0 "8e8a075e_296b_4b9c_b4e5115067246229" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_ChannelPattern.SetAt(STAR_TEACHING::INT::SECONDARY_CHANNEL-1, 1);
// }} ""
// {{ 157 1 0 "7c1e559a_efd0_4ddd_ae78ce2602639aae" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(int_ChIndex = 0; int_ChIndex < STAR_TEACHING::INT::TOTAL_CHANNELS;)
{
int_ChIndex = int_ChIndex + 1;
// }} ""
// {{{ 158 1 0 "3ff3cfe8_ff40_43ab_8fe6e6523bffdeb1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_ChannelPattern = StrConcat2(str_ChannelPattern, arr_ChannelPattern.ElementAt( int_ChIndex -1));
// }} ""
// {{ 159 1 0 "7c1e559a_efd0_4ddd_ae78ce2602639aae" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
Trace("Channel Pattern:  ",str_ChannelPattern);
// {{ 161 1 0 "29ddc7ee_ad36_4ba3_9c218e47df077e24" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 162 1 0 "e2c538aa_8e1f_41d3_a90b75481c54b090" "{DB5A2B39-67F2-4a78-A78F-DAF3FB056366}"
arr_UniqueTips=i_arr_UniqueTips;
// }} ""
// {{ 163 1 0 "0eba2f39_73da_44ad_83c0037b6dc9d022" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 164 1 0 "2070b7d1_2dc7_4933_a19606728e5484e6" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
int_TotalTipTypes=arr_UniqueTips.GetSize();
// }} ""
// {{ 165 1 0 "6cfa436a_555c_45b7_90a425dc9f88001a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_TeachingNeedles = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 166 1 0 "365da520_5053_4b3b_8148cf418f3ddc29" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_1000uLTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 167 1 0 "91e3c936_9912_4c0b_b90bf9fdd0e1a109" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_300uLTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 168 1 0 "7d30c63b_1ebc_4a7e_ad1c4e0b0cf39c06" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_300uLSlimTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 169 1 0 "251c8fe3_f99b_4fdd_a1fe8c9809d2fb1e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_50uLTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 170 1 0 "8149bdbe_401f_4d97_8480326110f857b0" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_10uLTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 171 1 0 "936ed5e2_2db4_41a5_85b38660fc04a982" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_SelectedTeachingNeedles = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 172 1 0 "7fa7825e_db49_4e85_816221fc3123c4c5" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_Selected1000uLTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 173 1 0 "09bd24f4_ff3d_4fa7_93aadbbce86ea5fa" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_Selected300uLTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 174 1 0 "23513ad7_90a4_44fe_bd4ecbc01cf81eb6" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_Selected300uLSlimTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 175 1 0 "88b7b715_dd1f_4dcd_a1146c551988080c" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_Selected50uLTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 176 1 0 "9ec8ce56_d7f2_4973_b1c91db348b200dc" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_Selected10uLTips = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 177 1 0 "b012c00b_c29b_4832_9298c9880af6bebf" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalTipTypes;)
{
i = i + 1;
// }} ""
// {{ 178 1 0 "407a22c9_8b54_4f83_956893341fb8c2a1" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
str_TipType=arr_UniqueTips.GetAt(i-1);
// }} ""
// {{ 179 1 0 "52d8389d_b4d7_41c8_bf0d2854cd80109c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_TipType == "Teaching Needles")
{
// }} ""
// {{ 180 1 0 "649bb853_76e3_4a66_b794b6c8540d5b7a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_TeachingNeedles = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 181 1 0 "52d8389d_b4d7_41c8_bf0d2854cd80109c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 182 1 0 "79767627_0ee7_491e_8167345657f633f8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_TipType == "1000uL Tips")
{
// }} ""
// {{ 183 1 0 "a88089e2_a51a_4074_b8ee6df5f2ad69c6" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_1000uLTips = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 184 1 0 "79767627_0ee7_491e_8167345657f633f8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 185 1 0 "e266490b_dcd5_4200_9a6ad9ddc41530c0" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_TipType == "300uL Slim Tips")
{
// }} ""
// {{ 186 1 0 "bbdc115e_d680_4dad_ac2900c43e9f82a6" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_300uLSlimTips = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 187 1 0 "e266490b_dcd5_4200_9a6ad9ddc41530c0" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 188 1 0 "dfdb9186_87d2_4b71_be4366d5e9e444cc" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_TipType == "300uL Tips")
{
// }} ""
// {{ 189 1 0 "355c7714_9e2d_4a8c_af51997845c5b434" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_300uLTips = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 190 1 0 "dfdb9186_87d2_4b71_be4366d5e9e444cc" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 191 1 0 "d04e81c1_d10f_42b7_b5ccdceb2721d20e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_TipType == "50uL Tips")
{
// }} ""
// {{ 192 1 0 "f98c5c58_77e1_4e94_a556e24fa3007cf3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_50uLTips = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 193 1 0 "d04e81c1_d10f_42b7_b5ccdceb2721d20e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 194 1 0 "7d534429_0707_49bf_b2ad4f2634dc9330" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_TipType == "10uL Tips")
{
// }} ""
// {{ 195 1 0 "01fe5ed3_5aef_42a4_b5da2517a1e8bcf1" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_10uLTips = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 196 1 0 "7d534429_0707_49bf_b2ad4f2634dc9330" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 197 1 0 "b012c00b_c29b_4832_9298c9880af6bebf" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 198 1 0 "0eba2f39_73da_44ad_83c0037b6dc9d022" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 199 1 0 "07b1a240_ec7e_4c90_b3b8e35c2c112015" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::LockDoors(ML_STAR, STAR_TEACHING::BOOL::FALSE);
// }} ""
// {{ 200 1 0 "3aa7da3f_3144_41c9_b00e723f8d75f110" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialog1418BC6B53054f43AC97832C9D184A83.InitCustomDialog( "3aa7da3f_3144_41c9_b00e723f8d75f110" );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "TipImage.Source", str_TeachingTipImageName );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "radioButton1.IsEnabled", bool_TeachingNeedles );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "radioButton1.IsChecked", bool_SelectedTeachingNeedles );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_1mL.IsEnabled", bool_1000uLTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_1mL.IsChecked", bool_Selected1000uLTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_300Slim.IsChecked", bool_Selected300uLSlimTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_300Slim.IsEnabled", bool_300uLSlimTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_300.IsEnabled", bool_300uLTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_300.IsChecked", bool_Selected300uLTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_50.IsChecked", bool_Selected50uLTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_50.IsEnabled", bool_50uLTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_10.IsEnabled", bool_10uLTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "Tip_10.IsChecked", bool_Selected10uLTips );
customDialog1418BC6B53054f43AC97832C9D184A83.SetCustomDialogProperty( "button2.Content", i_str_EndButtonText );
customDialog1418BC6B53054f43AC97832C9D184A83.ShowCustomDialog();
retValueDialog = customDialog1418BC6B53054f43AC97832C9D184A83.GetCustomDialogProperty( "ReturnValue" );
str_TeachingTipImageName = customDialog1418BC6B53054f43AC97832C9D184A83.GetCustomDialogProperty( "TipImage.Source" );
bool_SelectedTeachingNeedles = customDialog1418BC6B53054f43AC97832C9D184A83.GetCustomDialogProperty( "radioButton1.IsChecked" );
bool_Selected1000uLTips = customDialog1418BC6B53054f43AC97832C9D184A83.GetCustomDialogProperty( "Tip_1mL.IsChecked" );
bool_Selected300uLSlimTips = customDialog1418BC6B53054f43AC97832C9D184A83.GetCustomDialogProperty( "Tip_300Slim.IsChecked" );
bool_Selected300uLTips = customDialog1418BC6B53054f43AC97832C9D184A83.GetCustomDialogProperty( "Tip_300.IsChecked" );
bool_Selected50uLTips = customDialog1418BC6B53054f43AC97832C9D184A83.GetCustomDialogProperty( "Tip_50.IsChecked" );
bool_Selected10uLTips = customDialog1418BC6B53054f43AC97832C9D184A83.GetCustomDialogProperty( "Tip_10.IsChecked" );
// }} ""
// {{ 201 1 0 "7bb2dee4_14d7_47c0_8fcc91eeffd1162b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 2)
{
// }} ""
// {{ 202 1 0 "d2afeb4b_73ce_431d_b0598f9048e3d977" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== GetTeachingNeedle - FINISH"));
// }} ""
// {{{ 203 1 0 "08719b44_af5b_49e1_8fdb9ccb03ec0128" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (retValueDialog);
// }} ""
// {{ 204 1 0 "7bb2dee4_14d7_47c0_8fcc91eeffd1162b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 205 1 0 "93fe7ee2_c562_433c_83a815acc2c9daeb" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("Teaching Needles:  ",bool_SelectedTeachingNeedles);
Trace("1000uL Tips:  ",bool_Selected1000uLTips);
Trace("300uL Slims:  ",bool_Selected300uLSlimTips);
Trace("300uL:  ",bool_Selected300uLTips);
Trace("50uL:  ",bool_Selected50uLTips);
// {{ 207 1 0 "779103db_e5b9_4fe6_b7e363afe902181e" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(a = 0; a < 1;)
{
a = a + 1;
// }} ""
// {{ 208 1 0 "a3c04ebd_2c38_422f_b976a094d4d64637" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SelectedTeachingNeedles == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 209 1 0 "fd578c75_0d63_41e8_99b7e61c039bcff2" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_SelectedTipType = Translate("Teaching Needles");
// }} ""
// {{ 210 1 0 "7f31b919_83f1_4148_862df2283400143d" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 211 1 0 "a3c04ebd_2c38_422f_b976a094d4d64637" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 212 1 0 "b506c892_c948_47fd_9127edd0394781ac" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_Selected1000uLTips == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 213 1 0 "973bc84d_5631_493d_a91bb16b9a886ec1" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_SelectedTipType = Translate("1000uL Tips");
// }} ""
// {{ 214 1 0 "9fd9e6f0_e129_4c99_bfdf88f317dd70dd" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 215 1 0 "b506c892_c948_47fd_9127edd0394781ac" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 216 1 0 "0103fc7b_fa84_4cef_8020a0e0fe87ec99" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_Selected300uLSlimTips == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 217 1 0 "57b179ea_b0d5_46ad_951ad206a5dda35f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_SelectedTipType = Translate("300uL Slim Tips");
// }} ""
// {{ 218 1 0 "c9a68687_e78b_4c82_ba540798232f9185" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 219 1 0 "0103fc7b_fa84_4cef_8020a0e0fe87ec99" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 220 1 0 "57e5d068_db87_43bc_9224ada1f1831f58" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_Selected300uLTips == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 221 1 0 "88e60437_c16b_4c51_ada20dbe7fe2f6bc" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_SelectedTipType = Translate("300uL Tips");
// }} ""
// {{ 222 1 0 "0cf09826_bf3d_4742_a4b57d833831c02d" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 223 1 0 "57e5d068_db87_43bc_9224ada1f1831f58" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 224 1 0 "141602f4_ac74_447b_b784ea9a546a726d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_Selected50uLTips == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 225 1 0 "b9bd2da7_1b21_4d16_99616ae38a71117b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_SelectedTipType = Translate("50uL Tips");
// }} ""
// {{ 226 1 0 "3a283c3b_27a0_4c5d_a8984e5d75b55656" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 227 1 0 "141602f4_ac74_447b_b784ea9a546a726d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 228 1 0 "33112bb3_8823_490b_850572603840430c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_Selected10uLTips == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 229 1 0 "fadbc7b2_56a5_41d7_ba5664097e1506c7" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_SelectedTipType = Translate("10uL Tips");
// }} ""
// {{ 230 1 0 "ba510b64_24cd_4419_8e011875159ef66e" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 231 1 0 "33112bb3_8823_490b_850572603840430c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 232 1 0 "779103db_e5b9_4fe6_b7e363afe902181e" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
Trace("Selected Tip Labware Type:  ",str_SelectedTipType);
// {{{ 234 1 0 "f4528938_d69d_4626_b423df834b541cb5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SQL_Filter = StrConcat4(Translate("SELECT [LAB_ID], [X_COORD], [Y_COORD] FROM [TIP_POSITIONS] WHERE [TIP_NAME] = '"), str_SelectedTipType, Translate("'"), Translate("ORDER BY X_COORD ASC, Y_COORD DESC, Z_COORD ASC"));
// }} ""
// {{ 235 1 0 "aede2313_87be_4bbc_bd9096c39f3fd1a0" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
QueryFiles.AddField("LAB_ID", str_TipLabID, hslString, 255);
QueryFiles.AddField("X_COORD", flt_X_Coord, hslFloat);
QueryFiles.AddField("Y_COORD", flt_Y_Coord, hslFloat);
if( 0 == QueryFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "TIP_POSITIONS", hslRead, str_SQL_Filter) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 236 1 0 "16da3aab_94e9_4d08_a24ba64da412af4c" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_TipLabware.SetSize(0);
// }} ""
// {{ 237 1 0 "bb1da532_1be7_4e31_8f3fb9766866524f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_PreviousCoord = Translate("");
// }} ""
// {{ 238 1 0 "f249a404_df9c_46b5_a022262ceb3fc286" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (
   (QueryFiles.Eof() == 0)
)
{
// }} ""
// {{ 239 1 0 "0dc2fa17_3f14_4ad9_af05f76bc338f522" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == QueryFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{{ 240 1 0 "cc5f1bcd_f57d_45e1_bd058b3df710bac1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_CurrentCoord = StrConcat4(flt_X_Coord, Translate("_"), flt_Y_Coord, Translate(""));
// }} ""
// {{ 241 1 0 "1231691a_715f_4594_b50641a0598f6032" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_CurrentCoord != str_PreviousCoord)
{
// }} ""
// {{ 242 1 0 "0d6cda44_317d_4fff_9c1768e00cacdcd3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_PreviousCoord = str_CurrentCoord;
// }} ""
// {{ 243 1 0 "bce7c9de_e257_4f37_861a6c5e83528af5" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_TipLabware.AddAsLast(str_TipLabID);
// }} ""
// {{ 244 1 0 "1231691a_715f_4594_b50641a0598f6032" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 245 1 0 "f249a404_df9c_46b5_a022262ceb3fc286" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 246 1 0 "877ba9fd_265e_448d_9b1e3268667cc93a" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != QueryFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
QueryFiles.RemoveFields();
// }} ""
// {{{ 247 1 0 "776d96c6_5096_4ccb_8ce2b664b945996e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Selected Tip Labware"), arr_TipLabware);
// }} ""
// {{{ 248 1 0 "3360270a_ad22_413c_ae53023c22575158" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::Get_Default_Sequence_For_LabwareID(ML_STAR, arr_TipLabware, seq_TipPickUp);
// }} ""
// {{ 249 1 0 "84a02372_c350_4ca2_a106ebbba8dea7be" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SelectedTeachingNeedles == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{{ 250 1 0 "3e7ef407_b488_4f21_83f72d63a827ebf2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TotalPositions = SeqGetTotal(seq_TipPickUp);
// }} ""
// {{ 251 1 0 "a7097b3f_b011_45f0_bc20e6ee632b3344" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_TotalPositions = int_TotalPositions - 1;
// }} ""
// {{ 252 1 0 "541eaa8f_1f65_416d_b4fda1a847bcd409" "{B31F353A-5D80-11d4-A5EB-0050DA737D89}"
seq_TipPickUp.SetCurrentPosition(int_TotalPositions);
// }} ""
// {{ 253 1 0 "84a02372_c350_4ca2_a106ebbba8dea7be" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 254 1 0 "a5a049ac_2e97_4781_9fe08b8f8a740d10" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_TipCounter = StrConcat4(str_DeckLayoutName, Translate("_"), str_SelectedTipType, Translate(""));
// }} ""
// {{{ 255 1 0 "56e57210_b429_4de4_acf7477b258bfe43" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
StrReplace(str_TipCounter, Translate(" "), Translate("_"));
// }} ""
// {{{ 256 1 0 "c98423ae_18fb_4dd1_83e92c0a23ab5c5e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
StrReplace(str_TipCounter, Translate("."), Translate("_"));
// }} ""
// {{{ 257 1 0 "443cb7d3_3f5f_4e61_a0b5f3d79252b45b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TipCount::Edit2(seq_TipPickUp, str_TipCounter, ML_STAR, 100000);
// }} ""
// {{ 258 1 0 "84a02372_c350_4ca2_a106ebbba8dea7be" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 259 1 0 "93fe7ee2_c562_433c_83a815acc2c9daeb" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{{ 260 1 0 "2a8f3113_c4cf_4d8e_9a29653f354e8f34" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_TipLabID = SeqGetLabwareId(seq_TipPickUp);
// }} ""
// {{{ 261 1 0 "cd91e720_fd5a_43b7_8319133219630800" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_TipPosID = SeqGetPositionId(seq_TipPickUp);
// }} ""
// {{{ 262 1 0 "2fbbcb89_55b5_4c4b_a4b25eba5c700d93" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::GetTeachingTip(ML_STAR, str_TipLabID, str_TipPosID);
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 263 1 0 "9027ddb5_ffa5_464f_b4c2b601ccace020" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::GetTeachingTips(ML_STAR, str_ChannelPattern, seq_TipPickUp);
// }} ""
// {{ 264 1 0 "b164a0ae_6b89_4ddb_a1a7787a59ef2b95" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== GetTeachingNeedle - FINISH"));
// }} ""
// {{{ 265 1 0 "1cceb7b0_a1ce_46ca_b58ad7962abc90a5" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (retValueDialog);
// }} ""
// {{{ 5 "GetTeachingNeedle" "End"
}
// }} ""
// {{{ 5 "GetAllLabware" "Begin"
function GetAllLabware( device & ML_STAR, variable & o_arr_Carriers[], variable & o_arr_Tips[], variable & o_arr_Plates[], variable & o_arr_DeckLabIDs[], variable & o_arr_GroupedPlates[] ) void {
// }} ""
private variable str_DeckLayoutName;
private variable i;
private variable str_GroupCheck;
private variable int_PropertyCheck;
private variable int_TotalPlates;
private variable int_GroupValue;
private variable bln_FileExists;
// {{ 5 "GetAllLabware" "InitLocals"
o_arr_Carriers.SetSize( 0);
o_arr_Tips.SetSize( 0);
o_arr_Plates.SetSize( 0);
o_arr_DeckLabIDs.SetSize( 0);
o_arr_GroupedPlates.SetSize( 0);
// }} ""
// {{ 96 1 0 "7538fdf3_babf_414f_9b636e724fb4b36c" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== GetAllLabware - START"));
// }} ""
// {{{ 97 1 0 "5e644b26_c0f5_440d_968a1a6b6f4c69b1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bln_FileExists = HSLExtensions::File::Exists(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH);
// }} ""
// {{ 98 1 0 "da9b588a_be10_452e_a25845b8c2235327" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_FileExists == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{{ 99 1 0 "ba6a25d8_66f0_4a44_989d5203290d00df" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::File::Delete(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH);
// }} ""
// {{ 100 1 0 "da9b588a_be10_452e_a25845b8c2235327" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 101 1 0 "c9e33a4b_d62a_4b3c_8a93003452c3ca59" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_DeckLayoutName = HSLExtensions::File::GetFileNameWithoutExtension(STAR_TEACHING::STR::DECK_LAYOUT_PATH);
// }} ""
// {{ 102 1 0 "6cb5deea_884b_4c0a_8248223557807065" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 103 1 0 "5b1c6a42_c2b3_49cf_9d898f258d234d22" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::GetAllCarriers(ML_STAR, o_arr_Carriers);
// }} ""
// {{{ 104 1 0 "ceb2332a_e736_4a00_98f0d5ef33791cb7" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Unique carriers"), o_arr_Carriers);
// }} ""
// {{ 105 1 0 "29f54f25_7cdb_4022_956f39b6c1f3db6e" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 106 1 0 "30fdaafb_2019_4b51_bfa241294fc395e9" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::GetAllTips(ML_STAR, o_arr_Tips);
// }} ""
// {{{ 107 1 0 "b89804de_79e7_42ac_a85efdd879b0ca19" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Unique tips"), o_arr_Tips);
// }} ""
// {{ 108 1 0 "3f6a9e1d_5a38_4507_95ad5f1fb08df632" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 109 1 0 "288c66a3_a2e9_47aa_a54fc03d83a4b27a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::GetAllRacks(ML_STAR, o_arr_Plates, o_arr_DeckLabIDs);
// }} ""
// {{{ 110 1 0 "78b2bc02_9b64_466d_a98ac864eae53a91" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Unique plates"), o_arr_Plates);
// }} ""
// {{{ 111 1 0 "aadbee87_a3c9_4f81_a84a2bee7e9085eb" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Labware IDs"), o_arr_DeckLabIDs);
// }} ""
// {{ 112 1 0 "09fdfd94_cb94_4b46_942b396a445039a3" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
o_arr_GroupedPlates.SetSize(0);
// }} ""
// {{ 113 1 0 "4bb48e80_4c00_4911_aa69b52e529de585" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
int_TotalPlates=o_arr_DeckLabIDs.GetSize();
// }} ""
// {{ 114 1 0 "3546abb5_11ba_489b_ac9fc305b215eac3" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalPlates;)
{
i = i + 1;
// }} ""
// {{{ 115 1 0 "165c95a3_29c7_40f8_8f7ff604920e1c26" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_GroupCheck = DevGetLabwareData(ML_STAR, o_arr_DeckLabIDs.ElementAt( i -1), STAR_TEACHING::TEACH_POSITION::PROPERTY_KEY_GROUP);
// }} ""
// {{{ 116 1 0 "e3eb97c5_5260_43aa_928c79ef5feb696e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_PropertyCheck = StrGetLength(str_GroupCheck);
// }} ""
// {{ 117 1 0 "a0f3637c_cfd1_4663_ace61c3f1c8b88f1" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_PropertyCheck > 0)
{
// }} ""
// {{{ 118 1 0 "4dc27f8b_a124_4991_9195ee7f96d0f9bc" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_GroupValue = StrIVal(str_GroupCheck);
// }} ""
// {{ 119 1 0 "a0f3637c_cfd1_4663_ace61c3f1c8b88f1" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 120 1 0 "965948cc_d604_433e_b8ad1c9e13199c18" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_GroupValue = 0;
// }} ""
// {{ 121 1 0 "a0f3637c_cfd1_4663_ace61c3f1c8b88f1" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 122 1 0 "ca414040_ce8b_439f_8293ec8bf9f127b3" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_GroupValue == 1)
{
// }} ""
// {{ 123 1 0 "61b84c9d_6907_4759_a3e819f3f1476ad0" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
o_arr_GroupedPlates.AddAsLast(o_arr_DeckLabIDs.ElementAt( i -1));
// }} ""
// {{ 124 1 0 "ca414040_ce8b_439f_8293ec8bf9f127b3" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 125 1 0 "3546abb5_11ba_489b_ac9fc305b215eac3" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{{ 126 1 0 "90d7e1fe_58a9_4176_a0882b61822bfb37" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Group Plates"), o_arr_GroupedPlates);
// }} ""
// {{ 127 1 0 "6cb5deea_884b_4c0a_8248223557807065" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 128 1 0 "b738d25a_efc5_496d_ae04a860dbcd4b4e" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== GetAllLabware - FINISH"));
// }} ""
// {{{ 5 "GetAllLabware" "End"
}
// }} ""
// {{{ 5 "Abstract" "Begin"
function Abstract(  ) void {
// }} ""
private variable str_CurrentVersion;
// {{ 5 "Abstract" "InitLocals"
// }} ""
// {{ 1 1 0 "a49e7bcc_3b1a_4757_a05b704b4098bbe7" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_CurrentVersion = Translate("1.5.0");
// }} ""
Trace("Position Teaching Controller Version:  ",str_CurrentVersion);
// {{ 3 1 0 "129843ec_6afd_4088_8e599418a40cbb13" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 4 1 0 "0647e9a7_1635_431a_953866fceb087843" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 5 1 0 "72792dff_fd8d_49ce_9b858ae67fa25997" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 6 1 0 "6c3a8aaf_3395_4488_8a30c9ddc21fe3bc" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 7 1 0 "3ba22e1f_19e9_4bc3_88710a9e92354a2e" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 8 1 0 "93fb6d30_3b4c_48de_a5a8289ff9b89ca2" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 9 1 0 "1af3767a_ef05_40d8_9ca02563a98cabdd" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
STAR_TEACHING::INIT::InitializeVariables();
// }} ""
// {{{ 10 1 0 "16a0b037_ad29_4a14_9c723ac001b5f18b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
INIT_RCK_VALUES::InitFunction();
// }} ""
// {{{ 11 1 0 "dc9c9f83_5005_4de4_bf7504484a9cd2ea" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
INIT_CTR_VALUES::InitFunction();
// }} ""
// {{{ 12 1 0 "20d96b43_71f0_42c7_ad9ff749233eb53a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
INIT_LID_VALUES::InitFunction();
// }} ""
// {{{ 13 1 0 "4518a706_ec84_4aa5_9b5db3053730226e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
INIT_TML_VALUES::InitFunction();
// }} ""
// {{{ 5 "Abstract" "End"
}
// }} ""
// {{{ 5 "SelectLabwareToTeach" "Begin"
function SelectLabwareToTeach( device & ML_STAR, variable & i_arr_LabwareTaught[], variable & o_arr_LabwareToTeach[] ) variable {
// }} ""
private variable retValueDialog;
private variable arr_PrevTaughtLabware[];
private variable arr_LabwareOnDeck[];
private variable int_VisualState;
private variable flt_PlateZCoord;
private variable str_PlateName;
private variable str_PlateTeachWell;
private variable flt_PlateYCoord;
private variable str_PlateCarrier;
private variable flt_PlateXCoord;
private variable str_PlateLabID;
private variable str_PlateCarrierSite;
private variable int_GroupValue;
private variable str_PlateConfigFile;
private variable str_SQL_Order;
private file ReadFiles;
private variable bln_Done;
private variable int_LabwareOnDeckSelected;
private variable PrevTaughtSelected;
private variable int_TotalTaught;
private variable i;
private variable str_LabwareToTeachText;
private variable arr_NotExpectedValues[];
private variable arr_MissingValues[];
private variable int_TotalPrevTaught;
private variable int_TotalOnDeck;
private variable bln_PrevTaughtValid;
private variable bln_OnDeckValid;
private variable bln_MeasureValid;
private dialog customDialog53DC90C12FB449e9A6BD460D9D1E355A;
private dialog customDialog48C20C017A5E453dB001D4BE8136A1D4;
private variable int_TotalLabwareToTeach;
private dialog customDialog60D0CFBA73414475A08939B8FF68C76D;
// {{ 5 "SelectLabwareToTeach" "InitLocals"
o_arr_LabwareToTeach.SetSize( 0);
// }} ""
// {{ 492 1 0 "c2ae7864_3c1b_4074_a00d441f9ebef1c0" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== SelectLabwareToTeach - START"));
// }} ""
// {{{ 493 1 0 "a5e5f397_e3e6_49e9_b3903a7f162ed22d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::LockDoors(ML_STAR, STAR_TEACHING::BOOL::FALSE);
// }} ""
// {{ 494 1 0 "7b33891e_4a27_4007_91faa1b8e295b6d3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
retValueDialog = -1;
// }} ""
// {{ 495 1 0 "85dcac5a_79fb_4af7_b83c0bc2e973ead3" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (1 == 1)
{
// }} ""
// {{{ 496 1 0 "1879464f_0836_4f91_aa35818ad25df239" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ResetLabwareVisState(ML_STAR);
// }} ""
// {{ 497 1 0 "ea024a71_c1af_4e7a_a524d1dc4ff55212" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
o_arr_LabwareToTeach.SetSize(0);
// }} ""
// {{ 498 1 0 "b83fcc6e_e087_4002_9d99bd18f243d253" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_PrevTaughtLabware.SetSize(0);
// }} ""
// {{ 499 1 0 "5f8ade20_caaf_461a_85087073a4f7bcf8" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_LabwareOnDeck.SetSize(0);
// }} ""
// {{{ 500 1 0 "cac58be6_085e_4e4c_98c532501e170b3f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SQL_Order = StrConcat2(Translate("SELECT * FROM [PLATES] ORDER BY [LAB_ID] ASC"), Translate(""));
// }} ""
// {{ 501 1 0 "6485a9c1_4b72_4ba4_a7f7841735c821e8" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
ReadFiles.AddField("CARRIER", str_PlateCarrier, hslString, 255);
ReadFiles.AddField("SITE", str_PlateCarrierSite, hslString, 255);
ReadFiles.AddField("LAB_ID", str_PlateLabID, hslString, 255);
ReadFiles.AddField("CONFIG_FILE", str_PlateConfigFile, hslString, 255);
ReadFiles.AddField("LAB_NAME", str_PlateName, hslString, 255);
ReadFiles.AddField("X_COORD", flt_PlateXCoord, hslFloat);
ReadFiles.AddField("Y_COORD", flt_PlateYCoord, hslFloat);
ReadFiles.AddField("Z_COORD", flt_PlateZCoord, hslFloat);
ReadFiles.AddField("TEACH_INDEX", str_PlateTeachWell, hslString, 255);
ReadFiles.AddField("VIS_STATE", int_VisualState, hslInteger);
ReadFiles.AddField("TAUGHT_BEFORE", int_GroupValue, hslInteger);
if( 0 == ReadFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "PLATES", hslRead, str_SQL_Order) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 502 1 0 "25724c83_57d1_4993_8390c5489755906d" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (
   (ReadFiles.Eof() == 0)
)
{
// }} ""
// {{ 503 1 0 "8cb23d47_f666_47a9_9978ce6d66aa5e56" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == ReadFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{{ 504 1 0 "c490be5f_5c30_460b_ab62a3843325b1c2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bln_Done = HSLExtensions::Array::ContainsValue(i_arr_LabwareTaught, str_PlateLabID);
// }} ""
// {{ 505 1 0 "7ebc2ac9_4c5d_4f25_95c3bb6ab596c483" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_Done == STAR_TEACHING::BOOL::FALSE)
{
// }} ""
// {{ 506 1 0 "7460b17d_fcf9_402c_b008288fabd49381" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_GroupValue == 1)
{
// }} ""
// {{ 507 1 0 "ae2efadc_d23c_4676_9dea936fd1b348ca" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_PrevTaughtLabware.AddAsLast(str_PlateLabID);
// }} ""
// {{ 508 1 0 "7460b17d_fcf9_402c_b008288fabd49381" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 509 1 0 "8f5a1507_9c3f_480e_bd1b3ade1b0f18bb" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_LabwareOnDeck.AddAsLast(str_PlateLabID);
// }} ""
// {{ 510 1 0 "7460b17d_fcf9_402c_b008288fabd49381" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 511 1 0 "7ebc2ac9_4c5d_4f25_95c3bb6ab596c483" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 512 1 0 "25724c83_57d1_4993_8390c5489755906d" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 513 1 0 "d884587b_7586_432b_a513e62cd3c3bbff" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != ReadFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
ReadFiles.RemoveFields();
// }} ""
// {{{ 514 1 0 "9ecabf4b_0d4e_43d1_9d302b831ea6643b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Labware already taught"), i_arr_LabwareTaught);
// }} ""
// {{{ 515 1 0 "1a66e2fb_e51d_44aa_8ca3e4a45b58506d" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Labware previously taught"), arr_PrevTaughtLabware);
// }} ""
// {{{ 516 1 0 "e0146fec_0519_4c23_b866d34d372c0d1c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Labware left on the deck"), arr_LabwareOnDeck);
// }} ""
// {{ 517 1 0 "992999d1_72bb_4ad8_aded1846740356d2" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (1 == 1)
{
// }} ""
// {{ 518 1 0 "55acd334_17e4_431b_ae17e9e4a9f575f3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bln_PrevTaughtValid = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 519 1 0 "b75dc2d5_9347_46f3_85a64e46da5bde84" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bln_OnDeckValid = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 520 1 0 "b58fc96c_4abb_4a82_9e9de382fc76bc58" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bln_MeasureValid = STAR_TEACHING::BOOL::TRUE;
// }} ""
// {{ 521 1 0 "3ed9e6ff_674a_4121_84cb4c2582453800" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_LabwareToTeachText = Translate("");
// }} ""
// {{ 522 1 0 "51d1263f_bf2d_4cba_8cf96bec36f5ee72" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
int_TotalTaught=o_arr_LabwareToTeach.GetSize();
// }} ""
// {{ 523 1 0 "a7aacda7_4dee_4cc0_b1f313106dbef73e" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
int_TotalPrevTaught=arr_PrevTaughtLabware.GetSize();
// }} ""
// {{ 524 1 0 "80b2f8b4_d580_416a_aeadc75e36a8792a" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
int_TotalOnDeck=arr_LabwareOnDeck.GetSize();
// }} ""
// {{ 525 1 0 "6205a39f_b1a9_42aa_8e82e675eb8b689f" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalTaught;)
{
i = i + 1;
// }} ""
// {{ 526 1 0 "12272b3e_b310_4c64_b1f998cc1e69ff82" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i == 1)
{
// }} ""
// {{{ 527 1 0 "bb319b5f_b0d7_49d8_ada571a06c6d8d80" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabwareToTeachText = StrConcat4(i, Translate(".  "), o_arr_LabwareToTeach.ElementAt( i -1), Translate("\n"));
// }} ""
// {{ 528 1 0 "12272b3e_b310_4c64_b1f998cc1e69ff82" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 529 1 0 "44ed9857_d385_400d_a34c07174653ff22" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabwareToTeachText = StrConcat8(str_LabwareToTeachText, i, Translate(".  "), o_arr_LabwareToTeach.ElementAt( i -1), Translate("\n"), Translate(""), Translate(""), Translate(""));
// }} ""
// {{ 530 1 0 "12272b3e_b310_4c64_b1f998cc1e69ff82" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 531 1 0 "6205a39f_b1a9_42aa_8e82e675eb8b689f" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 532 1 0 "09cd779b_eb65_49b6_b3923b791b9ac626" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_TotalPrevTaught == 0)
{
// }} ""
// {{ 533 1 0 "88cd1462_2077_4598_8bc9761720358ea7" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bln_PrevTaughtValid = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 534 1 0 "09cd779b_eb65_49b6_b3923b791b9ac626" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 535 1 0 "11b67e8f_ff4b_4b57_aa11e467c235f77f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_TotalOnDeck == 0)
{
// }} ""
// {{ 536 1 0 "3f28c74b_1196_4a44_b4322e2497e0135a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bln_OnDeckValid = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 537 1 0 "11b67e8f_ff4b_4b57_aa11e467c235f77f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 538 1 0 "afb57abd_2ee7_461d_aebfb4177a36f544" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_TotalTaught == 0)
{
// }} ""
// {{ 539 1 0 "fe5aa593_8bd6_4c6d_a3534d9252b57a2b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bln_MeasureValid = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 540 1 0 "afb57abd_2ee7_461d_aebfb4177a36f544" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 541 1 0 "83ac8851_ba84_4164_a9bc5d6a977bd26e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_TotalTaught == 16)
{
// }} ""
// {{ 542 1 0 "9a713b67_73ac_48f0_8105be270d85d860" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bln_PrevTaughtValid = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 543 1 0 "f507f991_2a13_4351_a98efcb33f475677" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bln_OnDeckValid = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{ 544 1 0 "83ac8851_ba84_4164_a9bc5d6a977bd26e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 545 1 0 "f06dd1ea_295b_4dc8_b1db54abd1eceaad" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialog53DC90C12FB449e9A6BD460D9D1E355A.InitCustomDialog( "f06dd1ea_295b_4dc8_b1db54abd1eceaad" );
customDialog53DC90C12FB449e9A6BD460D9D1E355A.SetCustomDialogArrayProperty( "comboBox1.ItemsSource", arr_PrevTaughtLabware );
customDialog53DC90C12FB449e9A6BD460D9D1E355A.SetCustomDialogArrayProperty( "comboBox2.ItemsSource", arr_LabwareOnDeck );
customDialog53DC90C12FB449e9A6BD460D9D1E355A.SetCustomDialogProperty( "textBlock2.Text", str_LabwareToTeachText );
customDialog53DC90C12FB449e9A6BD460D9D1E355A.SetCustomDialogProperty( "comboBox1.IsEnabled", bln_PrevTaughtValid );
customDialog53DC90C12FB449e9A6BD460D9D1E355A.SetCustomDialogProperty( "comboBox2.IsEnabled", bln_OnDeckValid );
customDialog53DC90C12FB449e9A6BD460D9D1E355A.SetCustomDialogProperty( "button1.IsEnabled", bln_PrevTaughtValid );
customDialog53DC90C12FB449e9A6BD460D9D1E355A.SetCustomDialogProperty( "button2.IsEnabled", bln_OnDeckValid );
customDialog53DC90C12FB449e9A6BD460D9D1E355A.SetCustomDialogProperty( "button4.IsEnabled", bln_MeasureValid );
customDialog53DC90C12FB449e9A6BD460D9D1E355A.ShowCustomDialog();
retValueDialog = customDialog53DC90C12FB449e9A6BD460D9D1E355A.GetCustomDialogProperty( "ReturnValue" );
PrevTaughtSelected = customDialog53DC90C12FB449e9A6BD460D9D1E355A.GetCustomDialogProperty( "comboBox1.SelectedIndex" );
int_LabwareOnDeckSelected = customDialog53DC90C12FB449e9A6BD460D9D1E355A.GetCustomDialogProperty( "comboBox2.SelectedIndex" );
// }} ""
// {{ 546 1 0 "d1b240fc_dd10_483e_99daed70c79e15c9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 1)
{
// }} ""
// {{ 547 1 0 "11170d08_0b09_4b5e_bc53e8456e2f4248" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 548 1 0 "d1b240fc_dd10_483e_99daed70c79e15c9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 549 1 0 "95a31d8d_656d_4977_804bee01df7825eb" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 2)
{
// }} ""
// {{ 550 1 0 "3a102c3e_edcb_4558_b7cabde8223c3c2d" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("##################################################\nBACK\n##################################################"));
// }} ""
// {{ 551 1 0 "5f610177_c191_4c85_8fc61e10f11a532c" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== SelectLabwareToTeach - FINISH"));
// }} ""
// {{{ 552 1 0 "3f8e0a02_6a1d_4b10_adb222d354a6ec1e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ResetLabwareVisState(ML_STAR);
// }} ""
// {{{ 553 1 0 "9f86f3f4_2df6_4561_b265972808804053" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (retValueDialog);
// }} ""
// {{ 554 1 0 "95a31d8d_656d_4977_804bee01df7825eb" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 555 1 0 "58ab6b3a_dbda_45f9_b03188be1049729f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 6)
{
// }} ""
// {{ 556 1 0 "1273d4bf_c86a_4fb2_a457d76c8dc71f8e" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 557 1 0 "fa7213c5_13ac_4c93_a4666d99a034b7ba" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
o_arr_LabwareToTeach.AddAsLast(arr_PrevTaughtLabware.ElementAt( PrevTaughtSelected -1));
// }} ""
// {{{ 558 1 0 "f30fc22f_3c98_488a_9bacccbf24e275c6" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Array::CompareArrays(o_arr_LabwareToTeach, arr_PrevTaughtLabware, arr_MissingValues, arr_NotExpectedValues);
// }} ""
// {{{ 559 1 0 "7e37ec5d_f4b5_49d1_a5fd79adebda99ce" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
SetVisStateOfLabwareAndTemplate(ML_STAR, arr_PrevTaughtLabware.ElementAt( PrevTaughtSelected -1), 5);
// }} ""
// {{ 560 1 0 "8e5ab2dc_750c_49dd_a5c44b8ecf6803e2" "{DB5A2B39-67F2-4a78-A78F-DAF3FB056366}"
arr_PrevTaughtLabware=arr_NotExpectedValues;
// }} ""
// {{ 561 1 0 "58ab6b3a_dbda_45f9_b03188be1049729f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 562 1 0 "1c3b2f97_45d5_44d8_bb14619fc3a9325b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 7)
{
// }} ""
// {{ 563 1 0 "20e4c5b2_dfcd_480f_90360a5cf236cc8c" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 564 1 0 "599f092f_0674_4c7f_8505ab89fafc666d" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
o_arr_LabwareToTeach.AddAsLast(arr_LabwareOnDeck.ElementAt( int_LabwareOnDeckSelected -1));
// }} ""
// {{{ 565 1 0 "bd7a93b1_146a_4c04_a43fd64afc36a767" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Array::CompareArrays(o_arr_LabwareToTeach, arr_LabwareOnDeck, arr_MissingValues, arr_NotExpectedValues);
// }} ""
// {{{ 566 1 0 "a7ebc0dc_b57c_4533_b8e607c9e73870b9" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
SetVisStateOfLabwareAndTemplate(ML_STAR, arr_LabwareOnDeck.ElementAt( int_LabwareOnDeckSelected -1), 5);
// }} ""
// {{ 567 1 0 "2a79170c_d254_474e_8ac3d696a6ea05de" "{DB5A2B39-67F2-4a78-A78F-DAF3FB056366}"
arr_LabwareOnDeck=arr_NotExpectedValues;
// }} ""
// {{ 568 1 0 "1c3b2f97_45d5_44d8_bb14619fc3a9325b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 569 1 0 "992999d1_72bb_4ad8_aded1846740356d2" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 570 1 0 "ab664e80_3660_4892_8fb486935acf15be" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 2)
{
// }} ""
// {{ 571 1 0 "8fb68799_c1bd_46b8_82fe49e145600002" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 572 1 0 "ab664e80_3660_4892_8fb486935acf15be" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{ 573 1 0 "8e8ef676_7556_47a6_94fecd0192017a83" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialog60D0CFBA73414475A08939B8FF68C76D.InitCustomDialog( "8e8ef676_7556_47a6_94fecd0192017a83" );
customDialog60D0CFBA73414475A08939B8FF68C76D.SetCustomDialogProperty( "textBlock2.Text", str_LabwareToTeachText );
customDialog60D0CFBA73414475A08939B8FF68C76D.SetCustomDialogProperty( "button4.IsEnabled", bln_MeasureValid );
customDialog60D0CFBA73414475A08939B8FF68C76D.ShowCustomDialog();
retValueDialog = customDialog60D0CFBA73414475A08939B8FF68C76D.GetCustomDialogProperty( "ReturnValue" );
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 574 1 0 "377119e9_7b01_41dc_8a03c42fc99dd255" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialog48C20C017A5E453dB001D4BE8136A1D4.InitCustomDialog( "377119e9_7b01_41dc_8a03c42fc99dd255" );
customDialog48C20C017A5E453dB001D4BE8136A1D4.SetCustomDialogProperty( "textBlock2.Text", str_LabwareToTeachText );
customDialog48C20C017A5E453dB001D4BE8136A1D4.SetCustomDialogProperty( "button4.IsEnabled", bln_MeasureValid );
customDialog48C20C017A5E453dB001D4BE8136A1D4.ShowCustomDialog();
retValueDialog = customDialog48C20C017A5E453dB001D4BE8136A1D4.GetCustomDialogProperty( "ReturnValue" );
// }} ""
// {{ 575 1 0 "ed803e2e_fd26_4ea1_a93a4450d98c5243" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 1)
{
// }} ""
// {{ 576 1 0 "6557746d_beff_486c_872b07c932bdf41c" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 577 1 0 "ed803e2e_fd26_4ea1_a93a4450d98c5243" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 578 1 0 "85dcac5a_79fb_4af7_b83c0bc2e973ead3" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{{ 579 1 0 "a3a6e35e_0358_4995_8e79ee4d5ae8ad94" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ResetLabwareVisState(ML_STAR);
// }} ""
// {{{ 580 1 0 "9c328a65_36e9_4142_b28a84a0a32aa307" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Labware to teach"), o_arr_LabwareToTeach);
// }} ""
// {{ 581 1 0 "1cb40c33_0c58_4f59_87ea39237c29228b" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
int_TotalLabwareToTeach=o_arr_LabwareToTeach.GetSize();
// }} ""
// {{ 582 1 0 "91deb3a5_7b9a_4b7f_88795c709ae7f7f3" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalLabwareToTeach;)
{
i = i + 1;
// }} ""
// {{{ 583 1 0 "000f931c_438c_46fe_9cdef4a651cff613" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
SetVisStateOfLabwareAndTemplate(ML_STAR, o_arr_LabwareToTeach.ElementAt( i -1), 1);
// }} ""
// {{ 584 1 0 "91deb3a5_7b9a_4b7f_88795c709ae7f7f3" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 585 1 0 "603bdb49_cf33_4ff0_bd73964e6f448b20" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== SelectLabwareToTeach - FINISH"));
// }} ""
// {{{ 586 1 0 "2f87a187_1b16_458d_b2066915bc74aa59" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (retValueDialog);
// }} ""
// {{{ 5 "SelectLabwareToTeach" "End"
}
// }} ""
// {{{ 5 "ResetLabwareVisState" "Begin"
function ResetLabwareVisState( device & ML_STAR ) void {
// }} ""
private variable int_VisualState;
private variable flt_PlateZCoord;
private variable str_PlateName;
private variable str_PlateTeachWell;
private variable flt_PlateYCoord;
private variable str_PlateCarrier;
private variable flt_PlateXCoord;
private variable str_SQL_Order;
private variable str_PlateLabID;
private variable str_PlateCarrierSite;
private variable int_GroupValue;
private variable str_PlateConfigFile;
private file ReadFiles;
private variable arr_LabID[];
private variable arr_VisState[];
private variable str_CarrierConfigFile;
private variable int_CarrierTracks;
private variable flt_CarrierZCoord;
private variable flt_CarrierYCoord;
private variable flt_CarrierXCoord;
private variable str_CarrierLabID;
private variable int_CarrierTrack;
private variable str_CarrierName;
private variable str_TipConfigFile;
private variable flt_TipLength;
private variable flt_TipZCoord;
private variable flt_TipYCoord;
private variable flt_TipXCoord;
private variable int_TipType;
private variable str_TipName;
private variable str_TipLabID;
private variable int_CurrentVisState;
// {{ 5 "ResetLabwareVisState" "InitLocals"
// }} ""
// {{ 446 1 0 "ff1d4d70_bef2_478e_beae3411420273e3" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== ResetLabwareVisState  - START"));
// }} ""
// {{ 447 1 0 "1bb8bbd0_caf0_427c_b10249ab5b2ff620" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_LabID.SetSize(0);
// }} ""
// {{ 448 1 0 "62fdd50e_f115_4598_84245e0632562d98" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_VisState.SetSize(0);
// }} ""
// {{{ 449 1 0 "8c13c496_da5b_481e_92ddfa10418e8f5b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SQL_Order = StrConcat2(Translate("SELECT * FROM [PLATES] ORDER BY [LAB_ID] ASC"), Translate(""));
// }} ""
// {{ 450 1 0 "87afbafa_dee0_44a3_96d68029b24bd957" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
ReadFiles.AddField("CARRIER", str_PlateCarrier, hslString, 255);
ReadFiles.AddField("SITE", str_PlateCarrierSite, hslString, 255);
ReadFiles.AddField("LAB_ID", str_PlateLabID, hslString, 255);
ReadFiles.AddField("CONFIG_FILE", str_PlateConfigFile, hslString, 255);
ReadFiles.AddField("LAB_NAME", str_PlateName, hslString, 255);
ReadFiles.AddField("X_COORD", flt_PlateXCoord, hslFloat);
ReadFiles.AddField("Y_COORD", flt_PlateYCoord, hslFloat);
ReadFiles.AddField("Z_COORD", flt_PlateZCoord, hslFloat);
ReadFiles.AddField("TEACH_INDEX", str_PlateTeachWell, hslString, 255);
ReadFiles.AddField("VIS_STATE", int_VisualState, hslInteger);
ReadFiles.AddField("TAUGHT_BEFORE", int_GroupValue, hslInteger);
if( 0 == ReadFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "PLATES", hslRead) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 451 1 0 "7782231e_6bc5_4e36_99353b1fcf416717" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (
   (ReadFiles.Eof() == 0)
)
{
// }} ""
// {{ 452 1 0 "3a377c04_ffef_4c31_b40bab71ac092192" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == ReadFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{{ 453 1 0 "d2770cb2_63b6_47c0_b02af191b52c9667" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::GetLabwareVisibility(ML_STAR, str_PlateLabID, int_CurrentVisState);
// }} ""
// {{ 454 1 0 "1d46d83e_ceea_4fe2_a07277e43637da4e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_CurrentVisState != int_VisualState)
{
// }} ""
// {{ 455 1 0 "126ca385_50c5_4c14_af50b5085793d07c" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_LabID.AddAsLast(str_PlateLabID);
// }} ""
// {{ 456 1 0 "9024a188_5c3a_4ee9_a1eb5dc8a78cb978" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_VisState.AddAsLast(int_VisualState);
// }} ""
// {{ 457 1 0 "1d46d83e_ceea_4fe2_a07277e43637da4e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 458 1 0 "7782231e_6bc5_4e36_99353b1fcf416717" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 459 1 0 "55bcc76f_703f_493d_923c5eab05b0a5c3" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != ReadFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
ReadFiles.RemoveFields();
// }} ""
// {{ 460 1 0 "4d38e1e3_ca31_4280_b997a132f2e162b2" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
ReadFiles.AddField("TRACK", int_CarrierTrack, hslInteger);
ReadFiles.AddField("LAB_ID", str_CarrierLabID, hslString, 255);
ReadFiles.AddField("CONFIG_FILE", str_CarrierConfigFile, hslString, 255);
ReadFiles.AddField("CARRIER_NAME", str_CarrierName, hslString, 255);
ReadFiles.AddField("X_COORD", flt_CarrierXCoord, hslFloat);
ReadFiles.AddField("Y_COORD", flt_CarrierYCoord, hslFloat);
ReadFiles.AddField("Z_COORD", flt_CarrierZCoord, hslFloat);
ReadFiles.AddField("TOTAL_TRACKS", int_CarrierTracks, hslInteger);
ReadFiles.AddField("VIS_STATE", int_VisualState, hslInteger);
if( 0 == ReadFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "CARRIERS", hslRead) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 461 1 0 "94a7c4a9_bb3f_4393_ad6d807167e8fbde" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (
   (ReadFiles.Eof() == 0)
)
{
// }} ""
// {{ 462 1 0 "47023921_20a4_492f_bc323da4a73aa461" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == ReadFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{{ 463 1 0 "be2ba3d5_9307_4506_a9b9573fb054885c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::Deck_Visualize(ML_STAR, str_CarrierLabID, int_CurrentVisState);
// }} ""
// {{ 464 1 0 "469cbae5_9482_4723_8687e072d884646e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_CurrentVisState != int_VisualState)
{
// }} ""
// {{ 465 1 0 "33dadc95_bde3_4e21_b6f2f88c47e7ba6f" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_LabID.AddAsLast(str_CarrierLabID);
// }} ""
// {{ 466 1 0 "fe88e8fb_b66a_4059_8e943ccfc09471c9" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_VisState.AddAsLast(int_VisualState);
// }} ""
// {{ 467 1 0 "469cbae5_9482_4723_8687e072d884646e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 468 1 0 "94a7c4a9_bb3f_4393_ad6d807167e8fbde" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 469 1 0 "7cb78f4c_1071_4dea_9dc254d6658d1dfb" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != ReadFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
ReadFiles.RemoveFields();
// }} ""
// {{ 470 1 0 "549ce3d8_fb21_4279_9b2360df56d1a5c3" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
ReadFiles.AddField("TYPE", int_TipType, hslInteger);
ReadFiles.AddField("LAB_ID", str_TipLabID, hslString, 255);
ReadFiles.AddField("CONFIG_FILE", str_TipConfigFile, hslString, 255);
ReadFiles.AddField("X_COORD", flt_TipXCoord, hslFloat);
ReadFiles.AddField("Y_COORD", flt_TipYCoord, hslFloat);
ReadFiles.AddField("Z_COORD", flt_TipZCoord, hslFloat);
ReadFiles.AddField("TIP_LENGTH", flt_TipLength, hslFloat);
ReadFiles.AddField("TIP_NAME", str_TipName, hslString, 255);
ReadFiles.AddField("VIS_STATE", int_VisualState, hslInteger);
if( 0 == ReadFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "TIP_POSITIONS", hslRead) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 471 1 0 "c0ac4802_94c8_408f_85db4bdb47fc79e6" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (
   (ReadFiles.Eof() == 0)
)
{
// }} ""
// {{ 472 1 0 "42668a5a_0696_454e_803f6a430ce00580" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == ReadFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{{ 473 1 0 "b3ee089f_b04e_4f15_bfef79a6b8d8a5d9" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::GetLabwareVisibility(ML_STAR, str_TipLabID, int_CurrentVisState);
// }} ""
// {{ 474 1 0 "ac8e273c_ce34_469e_96e3441a6e01bfd8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_CurrentVisState != int_VisualState)
{
// }} ""
// {{ 475 1 0 "1110d4c4_e993_4f75_93442fc86210d8f1" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_LabID.AddAsLast(str_TipLabID);
// }} ""
// {{ 476 1 0 "5c22dccd_0a0a_4434_a96af85afbefb5e5" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_VisState.AddAsLast(int_VisualState);
// }} ""
// {{ 477 1 0 "ac8e273c_ce34_469e_96e3441a6e01bfd8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 478 1 0 "c0ac4802_94c8_408f_85db4bdb47fc79e6" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 479 1 0 "c0dcf94f_0555_4954_b35145370469c76c" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != ReadFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
ReadFiles.RemoveFields();
// }} ""
// {{{ 480 1 0 "fd3ab74c_4587_43c7_b170ec03ef6042c1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DeckVisualize::UpdateLoadedLabware(ML_STAR, arr_LabID, arr_VisState, Translate("Reset the vis state to where it was before teaching"));
// }} ""
// {{ 481 1 0 "f93cf950_3dd7_4d49_9cce978de5900f80" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== ResetLabwareVisState  - FINISH"));
// }} ""
// {{{ 5 "ResetLabwareVisState" "End"
}
// }} ""
// {{{ 5 "SetVisStateOfLabwareAndTemplate" "Begin"
function SetVisStateOfLabwareAndTemplate( device & ML_STAR, variable i_str_LabwareID, variable i_int_VisState ) void {
// }} ""
private variable int_VisualState;
private variable flt_PlateZCoord;
private variable str_PlateName;
private variable str_PlateTeachWell;
private variable flt_PlateYCoord;
private variable str_PlateCarrier;
private variable flt_PlateXCoord;
private variable str_PlateLabID;
private variable str_PlateCarrierSite;
private variable int_GroupValue;
private variable str_PlateConfigFile;
private file ReadFiles;
private variable str_SQL_Filter;
private variable str_SQL_Count;
private variable int_LabwareFound;
private variable arr_Labware[];
private variable arr_VisState[];
private variable bln_LabwareValid;
// {{ 5 "SetVisStateOfLabwareAndTemplate" "InitLocals"
// }} ""
// {{{ 588 1 0 "c297e9b4_ee8d_4544_b3a0b35c94612864" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SQL_Count = StrConcat4(Translate("SELECT COUNT(*) AS N FROM [PLATES] WHERE [LAB_ID] = '"), i_str_LabwareID, Translate("'"), Translate(""));
// }} ""
// {{ 589 1 0 "2a95c898_161a_4412_a2eb1b1f0d66081e" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
ReadFiles.AddField("N", int_LabwareFound, hslInteger);
if( 0 == ReadFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "PLATES", hslRead, str_SQL_Count) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 590 1 0 "43369044_0294_4c91_8d886c2b5492a4b1" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == ReadFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 591 1 0 "da4be5f4_408a_43f5_abc411a9d6f293f2" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != ReadFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
ReadFiles.RemoveFields();
// }} ""
// {{ 592 1 0 "6ca33677_04c5_42be_a0b8c8854d2aa640" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_LabwareFound == 0)
{
// }} ""
// {{ 593 1 0 "ec0eb8d5_ab39_4ba1_87899cd239b94340" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("####################################################\nLABWARE NOT FOUND!\n####################################################"));
// }} ""
// {{{ 594 1 0 "5f4b7de3_86c3_40bd_aaeca77e6d7b59d9" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return;
// }} ""
// {{ 595 1 0 "6ca33677_04c5_42be_a0b8c8854d2aa640" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 596 1 0 "7ed79d88_f6fb_4c06_b965b2c8a0368696" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SQL_Filter = StrConcat4(Translate("SELECT * FROM [PLATES] WHERE [LAB_ID] = '"), i_str_LabwareID, Translate("'"), Translate(""));
// }} ""
// {{ 597 1 0 "f564b932_d3ff_4dde_ba52d795a6f37906" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
ReadFiles.AddField("CARRIER", str_PlateCarrier, hslString, 255);
ReadFiles.AddField("SITE", str_PlateCarrierSite, hslString, 255);
ReadFiles.AddField("LAB_ID", str_PlateLabID, hslString, 255);
ReadFiles.AddField("CONFIG_FILE", str_PlateConfigFile, hslString, 255);
ReadFiles.AddField("LAB_NAME", str_PlateName, hslString, 255);
ReadFiles.AddField("X_COORD", flt_PlateXCoord, hslFloat);
ReadFiles.AddField("Y_COORD", flt_PlateYCoord, hslFloat);
ReadFiles.AddField("Z_COORD", flt_PlateZCoord, hslFloat);
ReadFiles.AddField("TEACH_INDEX", str_PlateTeachWell, hslString, 255);
ReadFiles.AddField("VIS_STATE", int_VisualState, hslInteger);
ReadFiles.AddField("TAUGHT_BEFORE", int_GroupValue, hslInteger);
if( 0 == ReadFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "PLATES", hslRead, str_SQL_Filter) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 598 1 0 "d4076d63_c2c9_4523_81b45928e392e559" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == ReadFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 599 1 0 "8b92f5f7_d8ef_49cd_938dffe3a7615093" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != ReadFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
ReadFiles.RemoveFields();
// }} ""
// {{ 600 1 0 "7f19506f_d459_4db8_864c1bf2b4614fae" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_Labware.SetSize(0);
// }} ""
// {{ 601 1 0 "3c92a954_6871_415b_ad3af3466d2531ce" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_VisState.SetSize(0);
// }} ""
// {{{ 602 1 0 "9eec2218_d402_4d69_811a63c8868632c6" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bln_LabwareValid = DevIsValidLabwareForCurrentDeckLayout(ML_STAR, str_PlateCarrier);
// }} ""
// {{ 603 1 0 "43f795a1_dd55_4a04_bf72bba5868db217" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_LabwareValid == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 604 1 0 "9831cb59_3040_49e5_a3278f16fe85eb25" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_Labware.AddAsLast(str_PlateCarrier);
// }} ""
// {{ 605 1 0 "99f0ccb7_3e75_4d89_b85625b17cd7666d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_int_VisState == 0)
{
// }} ""
// {{ 606 1 0 "ce047eef_14f7_4f19_bfcfb6b3bb07507e" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_VisState.AddAsLast(0);
// }} ""
// {{ 607 1 0 "99f0ccb7_3e75_4d89_b85625b17cd7666d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 608 1 0 "bbeff049_3e61_4446_9440bc0c037de9d3" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_VisState.AddAsLast(1);
// }} ""
// {{ 609 1 0 "99f0ccb7_3e75_4d89_b85625b17cd7666d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 610 1 0 "43f795a1_dd55_4a04_bf72bba5868db217" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 611 1 0 "c440682c_d9aa_48a1_860d64ed912f3e31" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_Labware.AddAsLast(str_PlateLabID);
// }} ""
// {{ 612 1 0 "5e2ceaf4_adc9_4371_ac16ea8137afde2b" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_VisState.AddAsLast(i_int_VisState);
// }} ""
// {{{ 613 1 0 "0537f1cd_3c1e_4e12_8ee38a0de0ade577" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DeckVisualize::UpdateLoadedLabware(ML_STAR, arr_Labware, arr_VisState, Translate(""));
// }} ""
// {{{ 5 "SetVisStateOfLabwareAndTemplate" "End"
}
// }} ""
// {{{ 5 "GetLabwareInformation" "Begin"
function GetLabwareInformation( variable i_str_LabwareID ) void {
// }} ""
private variable int_LabwareFound;
private variable str_SQL_Count;
private file ReadFiles;
private variable str_SQL_Filter;
private file QueryFiles;
// {{ 5 "GetLabwareInformation" "InitLocals"
// }} ""
// {{ 130 1 0 "885787b3_8c91_451c_8d0d7113b821ead7" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== GetLabwareInformation - START"));
// }} ""
// {{{ 131 1 0 "f4e01b0e_c570_4876_865c18e83179f064" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SQL_Count = StrConcat4(Translate("SELECT COUNT(*) AS N FROM [PLATES] WHERE [LAB_ID] = '"), i_str_LabwareID, Translate("'"), Translate(""));
// }} ""
// {{ 132 1 0 "289f1f61_d702_4263_803cf655b0731e7c" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
ReadFiles.AddField("N", int_LabwareFound, hslInteger);
if( 0 == ReadFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "PLATES", hslRead, str_SQL_Count) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 133 1 0 "6c45ab8a_629e_4834_9def16818f2f2d16" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == ReadFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 134 1 0 "f1af0550_d27a_4039_ae5338a6408fab52" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != ReadFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
ReadFiles.RemoveFields();
// }} ""
// {{ 135 1 0 "6a782967_7dc9_47f8_aea6659fd420c950" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_LabwareFound == 0)
{
// }} ""
// {{ 136 1 0 "9b47f315_e335_4fd1_bcae99c8df7fe075" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("####################################################\nLABWARE NOT FOUND!\n####################################################"));
// }} ""
// {{{ 137 1 0 "7450a114_3793_43b4_bf9f55817d98e7cc" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return;
// }} ""
// {{ 138 1 0 "6a782967_7dc9_47f8_aea6659fd420c950" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 139 1 0 "4abe9738_1927_413a_a1a7b2c47d7a74eb" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SQL_Filter = StrConcat4(Translate("SELECT * FROM [PLATES] WHERE [LAB_ID] = '"), i_str_LabwareID, Translate("'"), Translate(""));
// }} ""
// {{ 140 1 0 "5dcbd84f_923a_482c_b38e0ce070021eff" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
QueryFiles.AddField("CARRIER", STAR_TEACHING::TEACH_POSITION::CARRIER, hslString, 255);
QueryFiles.AddField("SITE", STAR_TEACHING::TEACH_POSITION::SITE, hslString, 255);
QueryFiles.AddField("LAB_ID", STAR_TEACHING::TEACH_POSITION::LAB_ID, hslString, 255);
QueryFiles.AddField("CONFIG_FILE", STAR_TEACHING::TEACH_POSITION::CONFIG_FILE, hslString, 255);
QueryFiles.AddField("LAB_NAME", STAR_TEACHING::TEACH_POSITION::LAB_NAME, hslString, 255);
QueryFiles.AddField("X_COORD", STAR_TEACHING::TEACH_POSITION::TAUGHT_X, hslFloat);
QueryFiles.AddField("Y_COORD", STAR_TEACHING::TEACH_POSITION::TAUGHT_Y, hslFloat);
QueryFiles.AddField("Z_COORD", STAR_TEACHING::TEACH_POSITION::TAUGHT_Z, hslFloat);
QueryFiles.AddField("TEACH_INDEX", STAR_TEACHING::TEACH_POSITION::TEACH_INDEX, hslString, 255);
if( 0 == QueryFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "PLATES", hslRead, str_SQL_Filter) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 141 1 0 "29752e97_8f49_4a90_b02af8186a088646" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == QueryFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 142 1 0 "5da95db9_c3f9_472f_a312808a17e4cbd3" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != QueryFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
QueryFiles.RemoveFields();
// }} ""
// {{ 143 1 0 "ad7de1cd_7d38_4025_a403da282bf860cf" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== GetLabwareInformation - FINISH"));
// }} ""
// {{{ 5 "GetLabwareInformation" "End"
}
// }} ""
// {{{ 5 "ConfirmCurrentLabware" "Begin"
function ConfirmCurrentLabware( device & ML_STAR ) variable {
// }} ""
private variable retValueDialog;
private variable str_SQL_Count;
private variable bool_ImageExists;
private variable str_RackImageFilePath;
private variable str_SQL_Filter;
private variable int_CarrierExists;
private variable str_CarrierName;
private variable int_TrackNumber;
private file QueryFiles;
private variable str_RackImageRel;
private variable flt_NotUsed;
private sequence seq_Temp_TeachPosition;
private dialog customDialog175F13111BEE4471A6F081BE5E1145D1;
private variable str_ChannelPattern;
private variable flt_WorkingChannelY;
private variable flt_SecondaryChannelY;
private variable int_ChIndex;
private variable arr_MoveY[];
private variable arr_MoveZ[];
private variable arr_ChannelPattern[];
// {{ 5 "ConfirmCurrentLabware" "InitLocals"
// }} ""
// {{ 15 1 0 "b6ba7a8c_601c_4b6e_81e58aa9ccd3c841" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== ConfirmCurrentLabware - START"));
// }} ""
// {{ 16 1 0 "0d0cb651_d7fd_4a01_ad389295834fa695" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
retValueDialog = -1;
// }} ""
// {{{ 17 1 0 "1e3d4d0d_8c83_435f_a8caecc04d980623" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::Deck_Visualize(ML_STAR, STAR_TEACHING::TEACH_POSITION::LAB_ID, 5);
// }} ""
// {{ 18 1 0 "aca848c6_a2ba_44a6_9500bcdc094411fa" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_ImageExists = STAR_TEACHING::BOOL::FALSE;
// }} ""
// {{{ 19 1 0 "83901929_5712_475c_991141a5ac619025" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::FILE_GetDefinitionFileValue(STAR_TEACHING::TEACH_POSITION::CONFIG_FILE, Translate("ImageRel"), str_RackImageRel);
// }} ""
// {{ 20 1 0 "c85c762a_ef39_4545_beb8f3734b2beb0a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_RackImageRel != "")
{
// }} ""
// {{{ 21 1 0 "f609956e_5824_46f1_8b4dd96954d5e839" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWAREEDIT_RCK::_GetFullPathFromRelative(str_RackImageRel, STAR_TEACHING::TEACH_POSITION::CONFIG_FILE, str_RackImageFilePath);
// }} ""
// {{{ 22 1 0 "9a6170d1_8b96_4a7b_9045f963e7a785ec" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bool_ImageExists = HSLExtensions::File::Exists(str_RackImageFilePath);
// }} ""
Trace("Rack Image:  ",str_RackImageFilePath);
Trace("Image Exists:  ",bool_ImageExists);
// {{ 24 1 0 "c85c762a_ef39_4545_beb8f3734b2beb0a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 25 1 0 "b03dc7f5_7c02_4b72_8b68fe84ae4a8966" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::Deck_Visualize(ML_STAR, STAR_TEACHING::TEACH_POSITION::LAB_ID, 5);
// }} ""
// {{{ 26 1 0 "8191fba8_e88c_490e_b87311853d8ea039" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SQL_Count = StrConcat4(Translate("SELECT COUNT(*) AS N FROM [CARRIERS] WHERE LAB_ID = '"), STAR_TEACHING::TEACH_POSITION::CARRIER, Translate("'"), Translate(""));
// }} ""
// {{ 27 1 0 "8bc6da86_adba_49d3_9d48c023309b9ee3" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
QueryFiles.AddField("N", int_CarrierExists, hslInteger);
if( 0 == QueryFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "CARRIERS", hslRead, str_SQL_Count) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 28 1 0 "c78a68ae_b395_4df9_bd708a6ff66871a0" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == QueryFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 29 1 0 "d76debf0_f51f_4024_b2cfbcbc3104c6fc" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != QueryFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
QueryFiles.RemoveFields();
// }} ""
// {{ 30 1 0 "30546dc8_4eef_464b_92edc01ae0482542" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_CarrierExists > 0)
{
// }} ""
// {{{ 31 1 0 "7cbedabd_c995_42d7_82493f71605e1a85" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SQL_Filter = StrConcat4(Translate("SELECT [TRACK], [CARRIER_NAME] FROM [CARRIERS] WHERE LAB_ID = '"), STAR_TEACHING::TEACH_POSITION::CARRIER, Translate("'"), Translate(""));
// }} ""
// {{ 32 1 0 "52a6a5b0_c3f8_494a_b1c56556aaefed77" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
QueryFiles.AddField("TRACK", int_TrackNumber, hslInteger);
QueryFiles.AddField("CARRIER_NAME", str_CarrierName, hslString, 255);
if( 0 == QueryFiles.Open(STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH + " " + "CARRIERS", hslRead, str_SQL_Filter) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, STAR_TEACHING::POSITION_TEACH::CURRENT_LAYOUT_TRACKING_PATH, "HxMetEdCompCmd");
}
// }} ""
// {{ 33 1 0 "e0641352_cbef_4053_82c081854e4faa08" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == QueryFiles.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 34 1 0 "5f7015f3_c30e_4dfa_bdc946b75dad0828" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != QueryFiles.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
QueryFiles.RemoveFields();
// }} ""
// {{ 35 1 0 "30546dc8_4eef_464b_92edc01ae0482542" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 36 1 0 "818d5d59_45ee_4e7d_a0763d2c0ffa0dc4" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_TrackNumber = Translate("NONE");
// }} ""
// {{ 37 1 0 "b27440e4_7164_4f8a_acc28048447a8bd2" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_CarrierName = Translate("NONE");
// }} ""
// {{ 38 1 0 "30546dc8_4eef_464b_92edc01ae0482542" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 39 1 0 "710a6e10_ca42_40cc_92a5ef6aa0ffd664" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevGetLabwarePosition(ML_STAR, STAR_TEACHING::TEACH_POSITION::LAB_ID, STAR_TEACHING::TEACH_POSITION::CURRENT_X, STAR_TEACHING::TEACH_POSITION::CURRENT_Y, STAR_TEACHING::TEACH_POSITION::CURRENT_Z, flt_NotUsed);
// }} ""
// {{{ 40 1 0 "69409e06_655a_43ed_9c11334ac2bba36e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::_RemoveExcessDigits(STAR_TEACHING::TEACH_POSITION::CURRENT_X);
// }} ""
// {{{ 41 1 0 "923e2a80_c38f_4b67_b579ccda438d7995" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::_RemoveExcessDigits(STAR_TEACHING::TEACH_POSITION::CURRENT_Y);
// }} ""
// {{{ 42 1 0 "b82e8772_de44_44ad_a23fff2862b9a83b" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::_RemoveExcessDigits(STAR_TEACHING::TEACH_POSITION::CURRENT_Z);
// }} ""
Trace("");
Trace("     ","Measure Labware ",STAR_TEACHING::TEACH_POSITION::LAB_ID);
Trace("     ","Original X Coord:  ",STAR_TEACHING::TEACH_POSITION::CURRENT_X);
Trace("     ","Original Y Coord:  ",STAR_TEACHING::TEACH_POSITION::CURRENT_Y);
Trace("     ","Original Z Coord:  ",STAR_TEACHING::TEACH_POSITION::CURRENT_Z);
Trace("");
// {{{ 44 1 0 "45610dac_41a5_4326_ad6cd5e7f3b76caa" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqRemoveAll(seq_Temp_TeachPosition);
// }} ""
// {{{ 45 1 0 "809fc641_a350_48ee_915093ad3fe54b0a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqAdd(seq_Temp_TeachPosition, STAR_TEACHING::TEACH_POSITION::LAB_ID, STAR_TEACHING::TEACH_POSITION::TEACH_INDEX);
// }} ""
// {{ 46 1 0 "99e05081_fee1_482f_8880c040bd62e74c" "{B31F353A-5D80-11d4-A5EB-0050DA737D89}"
seq_Temp_TeachPosition.SetCurrentPosition(1);
// }} ""
// {{{ 47 1 0 "008a275f_a77f_4804_9f52abf669ff9564" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DeckVisualize::UpdateUsedPositions(ML_STAR, seq_Temp_TeachPosition, 1, Translate("Processing well"));
// }} ""
// {{ 48 1 0 "8e4e606a_0c03_4f5f_bc67cb992b4dc670" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 49 1 0 "ded043b3_d3b1_4d9d_828c2d9b4acc9bc5" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_ChannelPattern.SetSize(0);
// }} ""
// {{ 50 1 0 "fb6b7755_46b5_4b24_8a23b78a4a600aaf" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_MoveY.SetSize(0);
// }} ""
// {{ 51 1 0 "b81a2b37_6eb6_4bc6_87f9ae7c94cfeeb3" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_MoveZ.SetSize(0);
// }} ""
// {{ 52 1 0 "f5b59020_87d8_4160_9f18a1450d09402f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_ChannelPattern = Translate("");
// }} ""
// {{ 53 1 0 "c74d313e_3369_4614_9c27f45c121ee550" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(int_ChIndex = 0; int_ChIndex < STAR_TEACHING::INT::TOTAL_CHANNELS;)
{
int_ChIndex = int_ChIndex + 1;
// }} ""
// {{ 54 1 0 "20f5b87c_7a9a_4c5c_926552d9cdd43731" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_ChannelPattern.AddAsLast(0);
// }} ""
// {{ 55 1 0 "89bdf175_ddbb_4f27_84e65ad5e5c57243" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_MoveY.AddAsLast(0.0);
// }} ""
// {{ 56 1 0 "1a3a5f06_c5a9_4b8f_866c1f6104a3ff43" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_MoveZ.AddAsLast(0.0);
// }} ""
// {{ 57 1 0 "c74d313e_3369_4614_9c27f45c121ee550" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 58 1 0 "634d7037_5f75_4817_8c67b6cb0e7db43c" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_ChannelPattern.SetAt(STAR_TEACHING::INT::WORKING_CHANNEL-1, 1);
// }} ""
// {{ 59 1 0 "7cc47635_09f6_4233_b92e6011ff6d741d" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_ChannelPattern.SetAt(STAR_TEACHING::INT::SECONDARY_CHANNEL-1, 1);
// }} ""
// {{ 60 1 0 "d35d953e_72ad_4111_814b2f68ae1d7f02" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(int_ChIndex = 0; int_ChIndex < STAR_TEACHING::INT::TOTAL_CHANNELS;)
{
int_ChIndex = int_ChIndex + 1;
// }} ""
// {{{ 61 1 0 "eb8f2c93_388f_4eb5_9088dd15e9afe35f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_ChannelPattern = StrConcat2(str_ChannelPattern, arr_ChannelPattern.ElementAt( int_ChIndex -1));
// }} ""
// {{ 62 1 0 "d35d953e_72ad_4111_814b2f68ae1d7f02" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 63 1 0 "071e4de7_3407_47ac_900facbc0d53752a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (STAR_TEACHING::INT::WORKING_CHANNEL > STAR_TEACHING::INT::SECONDARY_CHANNEL)
{
// }} ""
// {{ 64 1 0 "24e837d9_b779_4520_b0eb7433933463f6" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_WorkingChannelY = STAR_TEACHING::TEACH_POSITION::TAUGHT_Y - 4.5;
// }} ""
// {{ 65 1 0 "05d577be_303d_482f_b471c6eb0262664e" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_SecondaryChannelY = STAR_TEACHING::TEACH_POSITION::TAUGHT_Y + 4.5;
// }} ""
// {{ 66 1 0 "071e4de7_3407_47ac_900facbc0d53752a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 67 1 0 "721c6437_1edf_49e8_9b21ad041396e7f5" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_WorkingChannelY = STAR_TEACHING::TEACH_POSITION::TAUGHT_Y + 4.5;
// }} ""
// {{ 68 1 0 "801c5621_816a_4607_ab3eacf652e7ac53" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_SecondaryChannelY = STAR_TEACHING::TEACH_POSITION::TAUGHT_Y - 4.5;
// }} ""
// {{ 69 1 0 "071e4de7_3407_47ac_900facbc0d53752a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 70 1 0 "e94ab24e_aa33_496c_9b4ffb11ada2a49a" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_MoveY.SetAt(STAR_TEACHING::INT::WORKING_CHANNEL-1, flt_WorkingChannelY);
// }} ""
// {{ 71 1 0 "bcbdc71b_c3eb_4640_b8c03bb953be2e86" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_MoveY.SetAt(STAR_TEACHING::INT::SECONDARY_CHANNEL-1, flt_SecondaryChannelY);
// }} ""
// {{ 72 1 0 "3e33f12b_e726_447d_9d0227a59c3f2f02" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_MoveZ.SetAt(STAR_TEACHING::INT::WORKING_CHANNEL-1, 270.0);
// }} ""
// {{ 73 1 0 "ed3eb222_54a6_4c6e_aeeeb768659ff205" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_MoveZ.SetAt(STAR_TEACHING::INT::SECONDARY_CHANNEL-1, 270.0);
// }} ""
// {{{ 74 1 0 "4e41435b_46c5_4b2e_b0375f855e19c3ac" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::MoveChannelsToPosition(ML_STAR, str_ChannelPattern, 270.0, STAR_TEACHING::TEACH_POSITION::TAUGHT_X, arr_MoveY, arr_MoveZ);
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{{ 75 1 0 "792b2aba_5f44_4c81_bf34f6a54886e9fd" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::MoveChannelToPosition(ML_STAR, 270.0, STAR_TEACHING::TEACH_POSITION::TAUGHT_X, STAR_TEACHING::TEACH_POSITION::TAUGHT_Y, 270.0);
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 76 1 0 "8e4e606a_0c03_4f5f_bc67cb992b4dc670" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 77 1 0 "30522842_7051_4af3_b0f8c6a94ddd3537" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 78 1 0 "e4e65789_3380_46a1_b8d32aedf4f0aeb4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::LockDoors(ML_STAR, STAR_TEACHING::BOOL::FALSE);
// }} ""
// {{ 79 1 0 "06bb1055_b38d_42e4_aa6879f5b12eca97" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_ImageExists == STAR_TEACHING::BOOL::FALSE)
{
// }} ""
// {{ 80 1 0 "eb7e903b_2339_46b7_961b1d39a61192e1" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_RackImageFilePath = Translate("_003_Information");
// }} ""
// {{ 81 1 0 "06bb1055_b38d_42e4_aa6879f5b12eca97" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 82 1 0 "222a17df_4000_44b4_a81f46a102e3f87a" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialog175F13111BEE4471A6F081BE5E1145D1.InitCustomDialog( "222a17df_4000_44b4_a81f46a102e3f87a" );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "image1.Source", str_RackImageFilePath );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock10.ToolTipText", STAR_TEACHING::TEACH_POSITION::LAB_ID );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock10.Text", STAR_TEACHING::TEACH_POSITION::LAB_ID );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock11.ToolTipText", STAR_TEACHING::TEACH_POSITION::LAB_NAME );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock11.Text", STAR_TEACHING::TEACH_POSITION::LAB_NAME );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock12.ToolTipText", int_TrackNumber );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock12.Text", int_TrackNumber );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock13.Text", str_CarrierName );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock13.ToolTipText", str_CarrierName );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock14.Text", STAR_TEACHING::TEACH_POSITION::SITE );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock14.ToolTipText", STAR_TEACHING::TEACH_POSITION::SITE );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock15.Text", STAR_TEACHING::TEACH_POSITION::CURRENT_X );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock16.Text", STAR_TEACHING::TEACH_POSITION::CURRENT_Y );
customDialog175F13111BEE4471A6F081BE5E1145D1.SetCustomDialogProperty( "textBlock17.Text", STAR_TEACHING::TEACH_POSITION::CURRENT_Z );
customDialog175F13111BEE4471A6F081BE5E1145D1.ShowCustomDialog();
retValueDialog = customDialog175F13111BEE4471A6F081BE5E1145D1.GetCustomDialogProperty( "ReturnValue" );
// }} ""
// {{ 83 1 0 "30522842_7051_4af3_b0f8c6a94ddd3537" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 84 1 0 "fe1318d7_18ab_476d_b0098dd647ce28c6" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEACHING_SUPPORT::Deck_Visualize(ML_STAR, STAR_TEACHING::TEACH_POSITION::LAB_ID, 1);
// }} ""
// {{ 85 1 0 "3710a13f_3f49_4ff3_bfa863a693ddf49e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 2)
{
// }} ""
// {{{ 86 1 0 "7735038f_b78e_45f2_961cf7c433bff121" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DeckVisualize::UpdateUsedPositions(ML_STAR, seq_Temp_TeachPosition, 5, Translate("Processing well"));
// }} ""
// {{{ 87 1 0 "b8866425_bfd4_46d9_9bc10b385e9c6af5" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ResetLabwareVisState(ML_STAR);
// }} ""
// {{ 88 1 0 "9cce22ca_28aa_4bca_85113375b79004b2" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("############################################################\nSKIP LABWARE\n############################################################"));
// }} ""
// {{ 89 1 0 "73cb214b_e668_42da_9c614a36721ebdc3" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== ConfirmCurrentLabware - FINISH"));
// }} ""
// {{{ 90 1 0 "e1b1a490_f5b3_4216_af266229675134c0" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (retValueDialog);
// }} ""
// {{ 91 1 0 "3710a13f_3f49_4ff3_bfa863a693ddf49e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{{ 92 1 0 "1b429f26_3dfd_42a2_b09c70bde0810e9d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
GetLabwareInformation(STAR_TEACHING::TEACH_POSITION::LAB_ID);
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 93 1 0 "7587a849_2a5c_4a27_8a85935fe0217cb6" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== ConfirmCurrentLabware - FINISH"));
// }} ""
// {{{ 94 1 0 "af3676fe_a5f4_4dd4_b98f0c20705ca60a" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (retValueDialog);
// }} ""
// {{{ 5 "ConfirmCurrentLabware" "End"
}
// }} ""
// {{{ 5 "MeasureLabwarePosition" "Begin"
function MeasureLabwarePosition( device & ML_STAR, variable & o_flt_DeltaX, variable & o_flt_DeltaY, variable & o_flt_DeltaZ ) void {
// }} ""
private sequence seq_TeachPlate;
private variable flt_RackClearanceHeight;
private variable flt_RackHeight;
private variable flt_X_Coord;
private variable flt_Y_Coord;
private variable flt_Z_CoordMin;
private variable flt_Origin_ZCoord;
private variable flt_Origin_YCoord;
private variable flt_Origin_XCoord;
private variable flt_RackToContainerHeight;
private variable flt_Z_HeightFound;
private variable bln_EdgeFound;
private dialog dialogHandle1;
private variable int_ReturnValue;
private variable flt_Z_Coord;
private variable flt_Measured_YWidth;
private variable flt_Measured_Y_Center;
private variable flt_Measured_XWidth;
private variable flt_Measured_Z_Max;
private variable flt_Measured_X_Center;
private variable str_ContainerConfig;
private variable str_DimX;
private variable flt_WellDimX;
private variable flt_ContainerSafeHeight;
private variable flt_ContainerDepth;
private variable flt_NotUsed;
private variable flt_Measured_Z;
private variable flt_SafeHeight;
private dialog dialogHandleF7CDE0FD5DB44b4b917ECFC0C8F010F7;
private dialog customDialogB6061FD514394cdd8F59937116AB111E;
private dialog customDialog5AA6FDD6C1F24a39AA344AD14FC22B54;
private variable flt_MinHeight;
private variable retValueDialog;
private variable flt_HeightDifference;
private variable str_Description;
private variable flt_DeltaZ;
private variable flt_X_Adjust;
private variable flt_Y_Adjust;
private variable flt_ContainerBaseOffset;
private variable flt_ContainerThickness;
private variable flt_ContainerPlane;
private variable arr_WellWidths[];
private variable arr_LabwareStack[];
private variable int_TotalInStack;
private variable i;
private variable str_PlateLabID;
private dialog customDialogA6F933941C9F4e1691750830182749B3;
private variable str_StatusX;
private variable str_StatusY;
private variable str_StatusZ;
private dialog customDialogD5C0C7B902D64b0fBAD17A4659F3066C;
private dialog customDialogFCCCE600E83E41ddB4F9AAE2D21BA728;
// {{ 5 "MeasureLabwarePosition" "InitLocals"
o_flt_DeltaX = 0;
o_flt_DeltaY = 0;
o_flt_DeltaZ = 0;
// }} ""
// {{ 267 1 0 "21f8cc27_3bcf_491c_abd1efaf014c6b91" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== MeasureLabwarePosition - START"));
// }} ""
// {{ 268 1 0 "97231c1a_54db_4a6d_93d7ba1c1caa5508" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_LabwareStack.SetSize(0);
// }} ""
// {{{ 269 1 0 "e93e8d95_0fd9_4510_b76340b449f8466d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::SEQ_GetDefaultSequence(ML_STAR, STAR_TEACHING::TEACH_POSITION::LAB_ID, 1, seq_TeachPlate);
// }} ""
// {{{ 270 1 0 "46db35f3_e776_4192_b559b708ffbda64e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::LABWARE_GetRackHeight(ML_STAR, seq_TeachPlate, STAR_TEACHING::BOOL::TRUE, flt_RackHeight, flt_RackClearanceHeight);
// }} ""
// {{{ 271 1 0 "7c5d923e_2ee0_4133_8183481e40db2b52" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::LABWARE_GetLabwareOrigin(ML_STAR, seq_TeachPlate, flt_Origin_XCoord, flt_Origin_YCoord, flt_Origin_ZCoord);
// }} ""
// {{{ 272 1 0 "20a10ba3_0e0e_4c8f_9d7d0b0d3d519fee" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::CONT_GetConfigFile(ML_STAR, seq_TeachPlate, str_ContainerConfig);
// }} ""
// {{{ 273 1 0 "1afb7b0e_ad02_4e66_a7782574a6b4dd5b" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::CONT_GetContainerDepth(ML_STAR, seq_TeachPlate, STAR_TEACHING::BOOL::FALSE, flt_ContainerDepth, flt_NotUsed);
// }} ""
// {{{ 274 1 0 "f7c833a1_e5ae_4ea4_83323c4ccd3a7083" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::CONT_GetContainerDepth(ML_STAR, seq_TeachPlate, STAR_TEACHING::BOOL::TRUE, flt_NotUsed, flt_ContainerSafeHeight);
// }} ""
// {{{ 275 1 0 "a4db3f32_003f_4326_b681bbdb58eb0c18" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::CONT_GetContainerBaseThickness(ML_STAR, seq_TeachPlate, flt_ContainerThickness);
// }} ""
// {{{ 276 1 0 "57dda862_d7e5_40bd_b31a1dd898dfba2b" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::LABWARE_GetContainerBaseOffset(ML_STAR, seq_TeachPlate, flt_ContainerBaseOffset);
// }} ""
// {{ 277 1 0 "9ad295c6_5543_4857_a0354645c5c5cd5b" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 278 1 0 "bddc8261_67a6_4f5a_ac1ac7fad70cb2a3" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_WellWidths.SetSize(0);
// }} ""
// {{{ 279 1 0 "10062892_d464_4697_977d1216aee29267" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::FILE_GetDefinitionFileValue(str_ContainerConfig, Translate("1.DX"), str_DimX);
// }} ""
// {{{ 280 1 0 "1ffd26df_2ba6_400c_af8b2561faedfde5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_WellDimX = StrFVal(str_DimX);
// }} ""
// {{ 281 1 0 "a153bde7_b45e_4a4a_8c9cc84550e5c4a2" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_WellWidths.AddAsLast(flt_WellDimX);
// }} ""
// {{{ 282 1 0 "77094905_1e07_4bfd_8382884df0de8c89" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::FILE_GetDefinitionFileValue(str_ContainerConfig, Translate("1.DY"), str_DimX);
// }} ""
// {{{ 283 1 0 "3fad0455_e436_4eab_b8e1fbbf457b70c2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_WellDimX = StrFVal(str_DimX);
// }} ""
// {{ 284 1 0 "7687c0ee_c2ef_4bf5_adaf1d38797ddef3" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_WellWidths.AddAsLast(flt_WellDimX);
// }} ""
// {{{ 285 1 0 "e3614eb0_7f31_4d45_8ff4765d57249b17" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::FILE_GetDefinitionFileValue(str_ContainerConfig, Translate("1.DZ"), str_DimX);
// }} ""
// {{{ 286 1 0 "354744a2_cf84_4e77_b07a28e7da6f04e0" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_WellDimX = StrFVal(str_DimX);
// }} ""
// {{ 287 1 0 "1d8e8314_9ba4_42d6_9c52920f005ecf9a" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_WellWidths.AddAsLast(flt_WellDimX);
// }} ""
// {{{ 288 1 0 "bc263d5e_711c_41f8_b6a6e50bb8190fab" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_WellDimX = HSLStatisitics::Stat_Max(arr_WellWidths);
// }} ""
// {{ 289 1 0 "9ad295c6_5543_4857_a0354645c5c5cd5b" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("Well Width:  ",flt_WellDimX);
// {{ 291 1 0 "837707d8_73a2_4b64_aab750f51ce04bd3" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{ 292 1 0 "104a68c4_7c90_4cf6_91cfc6c759ea76b1" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Coord = flt_Origin_XCoord + 7.0;
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 293 1 0 "55f49978_29f2_430f_bb2325fa99573a38" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Coord = STAR_TEACHING::TEACH_POSITION::TAUGHT_X;
// }} ""
// {{ 294 1 0 "4867dbf5_1c95_4ae1_9fc2000f0218905a" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Y_Coord = flt_Origin_YCoord + 80.0;
// }} ""
// {{ 295 1 0 "30b06460_2d5a_4eb2_a8fd2cd3b92025d9" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_CoordMin = flt_Origin_ZCoord - 1.0;
// }} ""
// {{ 296 1 0 "2b1f56ec_687e_4133_871559a5d291a9f9" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 297 1 0 "3e7d323f_1790_486d_8d385dd40c811f3b" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_ContainerPlane = flt_Origin_ZCoord + flt_ContainerBaseOffset;
// }} ""
// {{ 298 1 0 "ff7b3406_7d5b_42f6_a37f234a9426a815" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_ContainerPlane = flt_ContainerPlane + flt_ContainerThickness;
// }} ""
// {{ 299 1 0 "b7e0d315_9c2a_482c_8d5fcb2208d03b14" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_ContainerPlane = flt_ContainerPlane + flt_ContainerDepth;
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{ 300 1 0 "0f9d82d1_e303_4416_ae5c5c1b8ebed3a8" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_RackToContainerHeight = flt_ContainerSafeHeight - 5.0;
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 301 1 0 "22e0551d_b1c3_43b7_a53bc3fff67ed11a" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_RackToContainerHeight = flt_ContainerPlane - flt_RackHeight;
// }} ""
// {{ 302 1 0 "e959a071_ce6e_48c2_a4d25eba46b88865" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (flt_RackToContainerHeight < 0.0)
{
// }} ""
// {{ 303 1 0 "b38aef7a_2acb_408f_98f7417f85ef3def" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackToContainerHeight = 0.0;
// }} ""
// {{ 304 1 0 "e959a071_ce6e_48c2_a4d25eba46b88865" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
Trace("Container Plane:  ",flt_ContainerPlane,"  Origin Z:  ",flt_Origin_ZCoord," Base Offset:  ",flt_ContainerBaseOffset,"  Container thickness:  ",flt_ContainerThickness,"  Container Depth:  ",flt_ContainerDepth);
Trace("Rack Height:  ",flt_RackHeight);
// {{{ 306 1 0 "faf7d3a9_4a37_48e0_92d422032e7bdc43" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
STATUS_UPDATE_CONTROLLER::SetStatusText(Translate("Tap plate to find the top of the labware"), STAR_TEACHING::BOOL::FALSE, STAR_TEACHING::BOOL::TRUE, STAR_TEACHING::BOOL::TRUE);
// }} ""
// {{ 307 1 0 "1ce1b339_9a23_45d4_ac8c52504a466486" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (1 == 1)
{
// }} ""
// {{ 308 1 0 "5bbb3090_a53a_4967_86fb2537f266eb73" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("======================================================================\nTAP RACK TO CHECK FOR EXISTENCE\n======================================================================"));
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{{ 309 1 0 "d2efdcdf_c5b7_40a2_b29af3a6e3e0732c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::MoveChannelToPosition(ML_STAR, 245.0, flt_X_Coord, flt_Y_Coord, 245.0);
// }} ""
// {{{ 310 1 0 "123015c5_7f04_45c2_ab0297823eeb2253" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bln_EdgeFound = MOVEMENT_CONTROLLER::SearchZHeight(ML_STAR, STAR_TEACHING::BOOL::FALSE, flt_Z_CoordMin, flt_Z_HeightFound);
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 311 1 0 "394e5619_13f0_44ef_9ae5a98d6a3ba2fd" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bln_EdgeFound = MOVEMENT_CONTROLLER::CheckPlateWithTwoChannels(ML_STAR, STAR_TEACHING::TEACH_POSITION::LAB_ID, flt_Z_HeightFound);
// }} ""
// {{ 312 1 0 "5a2354fb_fc78_4530_bdb7b03af8797412" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (flt_Z_HeightFound == 0.0)
{
// }} ""
// {{ 313 1 0 "ca117e66_c08b_4eb0_919fdecde2ddddb4" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_HeightFound = flt_RackHeight;
// }} ""
// {{ 314 1 0 "5a2354fb_fc78_4530_bdb7b03af8797412" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 315 1 0 "814ea3d9_6731_4482_9f80154bc952628d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_EdgeFound == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{{ 316 1 0 "eaaae565_8548_4600_9b9d016146e25a23" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::CreateMaximumYForWorkingChannel(ML_STAR);
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 317 1 0 "e1f6e950_6e59_4555_9c0a0d9ba9091bd2" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 318 1 0 "814ea3d9_6731_4482_9f80154bc952628d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 319 1 0 "3bc5fcb7_cef0_420d_a3e679825fe438e5" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("*********************************************************************\nPLATE NOT FOUND!!!\n*********************************************************************"));
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{{ 320 1 0 "98988c46_b3c9_41de_9e3e9bc1fe578b8e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::MoveChannelToZCoord(ML_STAR, 245.0);
// }} ""
// {{ 321 1 0 "09192a80_3987_45c6_a5159eed8b4fb3fd" "{21E07B31-8D2E-11d4-A3B8-002035848439}"
dialogHandle1.SetOutput(STAR_TEACHING::TEACH_POSITION::LAB_ID, Translate(" not found!  Make sure labware has bee loaded at the positoin shown on the deck and press retry."));
int_ReturnValue = dialogHandle1.ShowOutput(Translate("Plate not found!"), hslRetryCancel | hslInformation | hslDefButton1, hslInfinite);
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 322 1 0 "bd3cc8b1_cdcf_4e21_be823f59a510d2f0" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::LockDoors(ML_STAR, STAR_TEACHING::BOOL::FALSE);
// }} ""
// {{ 323 1 0 "b49d2595_6c45_43df_b1f64eee212e903a" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialogA6F933941C9F4e1691750830182749B3.InitCustomDialog( "b49d2595_6c45_43df_b1f64eee212e903a" );
customDialogA6F933941C9F4e1691750830182749B3.ShowCustomDialog();
int_ReturnValue = customDialogA6F933941C9F4e1691750830182749B3.GetCustomDialogProperty( "ReturnValue" );
// }} ""
// {{ 324 1 0 "96e10e4d_6488_4d42_891ae513d96dfeaf" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ReturnValue == 2)
{
// }} ""
// {{ 325 1 0 "089daae7_f5a9_4359_bd7c00fd86acad1c" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("###############################################################\nCANCEL TEACH\n###############################################################"));
// }} ""
// {{{ 326 1 0 "ebde0557_1ac7_4586_b8a346a7f0597b5c" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return;
// }} ""
// {{ 327 1 0 "96e10e4d_6488_4d42_891ae513d96dfeaf" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 328 1 0 "e276b019_5476_4d0f_a82aa71489729b0d" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("*********************************************************************\nRETRY\n*********************************************************************"));
// }} ""
// {{ 329 1 0 "1ce1b339_9a23_45d4_ac8c52504a466486" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 330 1 0 "eb3ce836_5744_4faa_81cc42a6b1899202" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_RackClearanceHeight = flt_Z_HeightFound + flt_RackToContainerHeight;
// }} ""
// {{ 331 1 0 "10a4d437_01ae_485c_97fcc7699135e313" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_RackClearanceHeight = flt_RackClearanceHeight + 5.0;
// }} ""
// {{ 332 1 0 "2c576a23_9af6_440b_90fda91e6e14fc3e" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_MinHeight = flt_Z_HeightFound + flt_RackToContainerHeight;
// }} ""
// {{ 333 1 0 "1bfe6b23_1bf7_445d_9abe3ca14f73308b" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_MinHeight = flt_MinHeight - 2.0;
// }} ""
Trace("Rack Height:  ",flt_Z_HeightFound);
Trace("Rack to Container:  ",flt_RackToContainerHeight);
Trace("Rack Clearance:  ",flt_RackClearanceHeight);
// {{ 335 1 0 "27f6f529_da67_431c_ade31d7c64efaa3c" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Adjust = STAR_TEACHING::TEACH_POSITION::TAUGHT_X;
// }} ""
// {{ 336 1 0 "1da65a35_a0d9_467e_ae7843721d44820e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Y_Adjust = STAR_TEACHING::TEACH_POSITION::TAUGHT_Y;
// }} ""
// {{{ 337 1 0 "5f3c4839_6bd8_4360_b485e7f746a9e0a0" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
STATUS_UPDATE_CONTROLLER::SetStatusText(Translate("Confirm over and inside well position"), STAR_TEACHING::BOOL::FALSE, STAR_TEACHING::BOOL::TRUE, STAR_TEACHING::BOOL::TRUE);
// }} ""
// {{ 338 1 0 "c8b93169_2762_48d1_891ef88819db6af8" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (1 == 1)
{
// }} ""
// {{{ 339 1 0 "03ee6542_75ca_4ec5_b8e5cd08b30b2c5d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::MoveChannelToPosition(ML_STAR, 245.0, flt_X_Adjust, flt_Y_Adjust, flt_RackClearanceHeight);
// }} ""
// {{ 340 1 0 "e86320ab_6b26_4405_bd55a6cbc4a5f1b2" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 341 1 0 "cf4b428c_dd5b_4814_8ac8bd7bf86e4de3" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("Double check to see if the channel is over the well"));
// }} ""
// {{ 342 1 0 "8cbbe3c0_cbe8_4897_b619e65889df88a1" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (1 == 1)
{
// }} ""
// {{{ 343 1 0 "c17be7b4_f3fe_414f_85f8b11d0439e246" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Description = StrConcat8(Translate("Confirm that channel "), STAR_TEACHING::INT::WORKING_CHANNEL, Translate(" is positioned rough 2 - 3 mm over well "), STAR_TEACHING::TEACH_POSITION::TEACH_INDEX, Translate(", and not inside the well.  \n\n"), Translate("Click Adjust to move the channel if it is not properly positioned."), Translate(""), Translate(""));
// }} ""
// {{{ 344 1 0 "7a7c58da_859b_4254_ab7a65f66c12ab25" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::LockDoors(ML_STAR, STAR_TEACHING::BOOL::FALSE);
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{ 345 1 0 "8dbbb958_aab0_4563_a1a5e1e9d9aae135" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialog5AA6FDD6C1F24a39AA344AD14FC22B54.InitCustomDialog( "8dbbb958_aab0_4563_a1a5e1e9d9aae135" );
customDialog5AA6FDD6C1F24a39AA344AD14FC22B54.SetCustomDialogProperty( "textBlock2.Text", str_Description );
customDialog5AA6FDD6C1F24a39AA344AD14FC22B54.ShowCustomDialog();
retValueDialog = customDialog5AA6FDD6C1F24a39AA344AD14FC22B54.GetCustomDialogProperty( "ReturnValue" );
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 346 1 0 "6bb2afc1_6118_4ea4_b38ad7808bf7c1fc" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialogD5C0C7B902D64b0fBAD17A4659F3066C.InitCustomDialog( "6bb2afc1_6118_4ea4_b38ad7808bf7c1fc" );
customDialogD5C0C7B902D64b0fBAD17A4659F3066C.SetCustomDialogProperty( "textBlock2.Text", str_Description );
customDialogD5C0C7B902D64b0fBAD17A4659F3066C.ShowCustomDialog();
retValueDialog = customDialogD5C0C7B902D64b0fBAD17A4659F3066C.GetCustomDialogProperty( "ReturnValue" );
// }} ""
// {{ 347 1 0 "79c0c641_c7e4_4d1b_bb7e1efd78b7bca1" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 6)
{
// }} ""
// {{ 348 1 0 "96123335_1041_4c98_b3fa54f1e586e096" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 349 1 0 "79c0c641_c7e4_4d1b_bb7e1efd78b7bca1" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 350 1 0 "6dba3e57_44b1_4041_9d96496ecc96a715" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Description = StrConcat4(Translate("Move the channel so that it is just over well "), STAR_TEACHING::TEACH_POSITION::TEACH_INDEX, Translate(""), Translate(""));
// }} ""
// {{{ 351 1 0 "7b380127_8194_44dc_8b76d87ce0307f29" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::ManuallyMoveChannel_WithDescription(ML_STAR, STAR_TEACHING::TEACH_POSITION::LAB_ID, STAR_TEACHING::TEACH_POSITION::TEACH_INDEX, str_Description);
// }} ""
// {{ 352 1 0 "3b4c7719_2f23_4cd9_abc8ace011ebcb33" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (STAR_TEACHING::BOOL::SIMULATION_MODE == STAR_TEACHING::BOOL::FALSE)
{
// }} ""
// {{{ 353 1 0 "0a54dcfc_7aa1_43a1_9f3eee5244a5aa30" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::GetChannelPosition(ML_STAR, flt_X_Adjust, flt_Y_Adjust, flt_RackClearanceHeight);
// }} ""
// {{ 354 1 0 "3b4c7719_2f23_4cd9_abc8ace011ebcb33" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 355 1 0 "8cbbe3c0_cbe8_4897_b619e65889df88a1" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 356 1 0 "e86320ab_6b26_4405_bd55a6cbc4a5f1b2" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 357 1 0 "d5b416d7_029f_45c0_8019e6d8bfb7b3fa" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (flt_MinHeight > flt_RackClearanceHeight)
{
// }} ""
// {{ 358 1 0 "a66881c1_fab0_4005_85f1213f18eb1895" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_MinHeight = flt_RackClearanceHeight - 7.0;
// }} ""
// {{ 359 1 0 "d5b416d7_029f_45c0_8019e6d8bfb7b3fa" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 360 1 0 "b441a622_72aa_4815_a7e8a0c88f6ee4b2" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 361 1 0 "f109b7ac_c704_451f_a9eea56c75cd8faa" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::MoveChannelToZCoord(ML_STAR, flt_MinHeight);
// }} ""
// {{ 362 1 0 "60c349eb_90a8_47a0_a67d216ebd741f73" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("Double check to see if the channel is within the well"));
// }} ""
// {{ 363 1 0 "7c9b65c7_cfce_46e9_82c891cb71636ef7" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
while (1 == 1)
{
// }} ""
// {{{ 364 1 0 "894f57d4_0dae_4f2e_9df7e8f5d9e7c006" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Description = StrConcat8(Translate("Confirm that channel "), STAR_TEACHING::INT::WORKING_CHANNEL, Translate(" is positioned roughly 2mm inside well "), STAR_TEACHING::TEACH_POSITION::TEACH_INDEX, Translate(".  \n\n"), Translate("Click Adjust to move the channel if it is not properly positioned."), Translate(""), Translate(""));
// }} ""
// {{{ 365 1 0 "39b76344_f404_4993_a7269d412d2f0307" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::LockDoors(ML_STAR, STAR_TEACHING::BOOL::FALSE);
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{ 366 1 0 "584b90f6_6505_40cd_90896c7e035c2214" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialogB6061FD514394cdd8F59937116AB111E.InitCustomDialog( "584b90f6_6505_40cd_90896c7e035c2214" );
customDialogB6061FD514394cdd8F59937116AB111E.SetCustomDialogProperty( "textBlock2.Text", str_Description );
customDialogB6061FD514394cdd8F59937116AB111E.ShowCustomDialog();
retValueDialog = customDialogB6061FD514394cdd8F59937116AB111E.GetCustomDialogProperty( "ReturnValue" );
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 367 1 0 "fe9e0803_6d12_417e_8663848875863fe2" "{998A7CCC-4374-484D-A6ED-E8A4F0EB71BA}"
customDialogFCCCE600E83E41ddB4F9AAE2D21BA728.InitCustomDialog( "fe9e0803_6d12_417e_8663848875863fe2" );
customDialogFCCCE600E83E41ddB4F9AAE2D21BA728.SetCustomDialogProperty( "textBlock2.Text", str_Description );
customDialogFCCCE600E83E41ddB4F9AAE2D21BA728.ShowCustomDialog();
retValueDialog = customDialogFCCCE600E83E41ddB4F9AAE2D21BA728.GetCustomDialogProperty( "ReturnValue" );
// }} ""
// {{ 368 1 0 "09ec3b79_b9b0_4a5a_ac8c9e45d2ec1580" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (retValueDialog == 6)
{
// }} ""
// {{ 369 1 0 "aa75b8e1_98bb_4ceb_9eed045d26bc2a18" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 370 1 0 "09ec3b79_b9b0_4a5a_ac8c9e45d2ec1580" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 371 1 0 "8ed35b0e_2b2f_401c_ac5a3206d77c2860" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Description = StrConcat4(Translate("Move the channel so that it is just inside the well "), STAR_TEACHING::TEACH_POSITION::TEACH_INDEX, Translate(""), Translate(""));
// }} ""
// {{{ 372 1 0 "21120982_928e_4352_a4513136e696fb28" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::ManuallyMoveChannel_WithDescription(ML_STAR, STAR_TEACHING::TEACH_POSITION::LAB_ID, STAR_TEACHING::TEACH_POSITION::TEACH_INDEX, str_Description);
// }} ""
// {{ 373 1 0 "1ecd17eb_ce17_48e7_9773ccd7843f0ea0" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (STAR_TEACHING::BOOL::SIMULATION_MODE == STAR_TEACHING::BOOL::FALSE)
{
// }} ""
// {{{ 374 1 0 "ce079480_03d7_45e9_ba1eaf2a999a4e71" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::GetChannelPosition(ML_STAR, flt_X_Adjust, flt_Y_Adjust, flt_MinHeight);
// }} ""
// {{ 375 1 0 "1ecd17eb_ce17_48e7_9773ccd7843f0ea0" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 376 1 0 "7c9b65c7_cfce_46e9_82c891cb71636ef7" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 377 1 0 "b441a622_72aa_4815_a7e8a0c88f6ee4b2" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 378 1 0 "9e053279_872a_4c1f_b653c3a275c65d8f" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_HeightDifference = flt_RackClearanceHeight - flt_MinHeight;
// }} ""
Trace("Height Difference:  ",flt_HeightDifference);
// {{ 380 1 0 "8993fe43_75b7_4d63_9e3ef4d35970c88f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (STAR_TEACHING::BOOL::SIMULATION_MODE == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 381 1 0 "dc260936_a787_4e70_b0d8c1c2288c40c7" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 382 1 0 "8993fe43_75b7_4d63_9e3ef4d35970c88f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 383 1 0 "fb833e19_17fe_45a8_b24c2dd4447db607" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (flt_HeightDifference < 5.0)
{
// }} ""
// {{ 384 1 0 "604cbff8_570c_42ff_ab1371c5ab764ebc" "{21E07B31-8D2E-11d4-A3B8-002035848439}"
dialogHandleF7CDE0FD5DB44b4b917ECFC0C8F010F7.SetOutput(Translate("The difference between the safe height and the minimum search height is too low.  The safe height and the minimum height must be at least 5 mm appart!"));
dialogHandleF7CDE0FD5DB44b4b917ECFC0C8F010F7.ShowOutput(Translate("Difference too low"), hslOKOnly | hslError | hslDefButton1, hslInfinite);
// }} ""
// {{ 385 1 0 "fb833e19_17fe_45a8_b24c2dd4447db607" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 386 1 0 "d573a3e4_d0c2_41cb_a0f231bdc178af41" "{B31F3533-5D80-11d4-A5EB-0050DA737D89}"
break;
// }} ""
// {{ 387 1 0 "fb833e19_17fe_45a8_b24c2dd4447db607" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 388 1 0 "c8b93169_2762_48d1_891ef88819db6af8" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 389 1 0 "1dd72b20_56ed_4f1e_b332b857044394dd" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("======================================================================\nFIND WELL CENTER\n======================================================================"));
// }} ""
// {{{ 390 1 0 "27527a3f_9553_43b8_a07879befdcd7085" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
STATUS_UPDATE_CONTROLLER::SetStatusText(Translate("Measure X/Y center"), STAR_TEACHING::BOOL::FALSE, STAR_TEACHING::BOOL::TRUE, STAR_TEACHING::BOOL::TRUE);
// }} ""
// {{ 391 1 0 "304ac8ab_b581_46de_ae5b9b0d46d7ca75" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (STAR_TEACHING::BOOL::SIMULATION_MODE == STAR_TEACHING::BOOL::FALSE)
{
// }} ""
// {{{ 392 1 0 "6f9376ff_a741_46de_85ca21bf428752e8" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::FindWellCenter(ML_STAR, flt_MinHeight, flt_RackClearanceHeight, flt_WellDimX, flt_Measured_X_Center, flt_Measured_Y_Center, flt_Measured_Z_Max, flt_Measured_XWidth, flt_Measured_YWidth);
// }} ""
// {{ 393 1 0 "304ac8ab_b581_46de_ae5b9b0d46d7ca75" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 394 1 0 "f3166a9f_71d0_4abc_9a175b3e90481fc4" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("======================================================================\nFIND Z BOTTOM\n======================================================================"));
// }} ""
// {{{ 395 1 0 "d60f01d5_588c_42b7_87d55eacc6febf88" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
STATUS_UPDATE_CONTROLLER::SetStatusText(Translate("Search for Z bottom"), STAR_TEACHING::BOOL::FALSE, STAR_TEACHING::BOOL::TRUE, STAR_TEACHING::BOOL::TRUE);
// }} ""
Trace("Container depth:  ",flt_ContainerDepth);
// {{ 397 1 0 "37d0b55e_a566_475a_a09398c4dcde3b24" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_CoordMin = flt_Measured_Z_Max - flt_ContainerDepth;
// }} ""
// {{ 398 1 0 "52f7154e_1f85_45d4_9733eeb9115b9080" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_CoordMin = flt_Z_CoordMin - 2.0;
// }} ""
// {{{ 399 1 0 "04368936_ca65_4818_884a7ccd86303192" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::SearchZHeight(ML_STAR, STAR_TEACHING::BOOL::FALSE, flt_Z_CoordMin, flt_Measured_Z);
// }} ""
// {{ 400 1 0 "12cf79e7_d6a7_447c_816684de53490958" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (STAR_TEACHING::BOOL::SYSTEM_STAR == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 401 1 0 "82b285a8_0779_458d_a2ffa765444692d2" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 402 1 0 "b822f3dd_fe69_4c2d_9f67f0d83fa672ef" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_Coord = flt_Measured_Z + 5.0;
// }} ""
// {{ 403 1 0 "3fa2759e_5f69_4789_a3de6a147b65315d" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_CoordMin = flt_Measured_Z - 1.0;
// }} ""
// {{{ 404 1 0 "f2cebe23_21ef_4878_aae16bf650ab28b2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::MoveChannelToZCoord(ML_STAR, flt_Z_Coord);
// }} ""
// {{{ 405 1 0 "35738a3a_65d5_410c_b5804ea30c99a5af" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::SearchZHeight(ML_STAR, STAR_TEACHING::BOOL::TRUE, flt_Z_CoordMin, flt_Measured_Z);
// }} ""
// {{ 406 1 0 "12cf79e7_d6a7_447c_816684de53490958" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 407 1 0 "6ddee231_9dc4_4763_a6ba1d39cfeeee70" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("======================================================================\nCalculate Offsets\n======================================================================"));
// }} ""
// {{ 408 1 0 "1cea8690_b03b_4ff8_be7c89eb86bb2c79" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_flt_DeltaX = flt_Measured_X_Center - STAR_TEACHING::TEACH_POSITION::TAUGHT_X;
// }} ""
// {{ 409 1 0 "59511d0c_34fb_4e04_af39d71fd7adad26" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_flt_DeltaY = flt_Measured_Y_Center - STAR_TEACHING::TEACH_POSITION::TAUGHT_Y;
// }} ""
// {{ 410 1 0 "da6d9e71_0033_41c7_a0580c4c8cf73b2b" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_flt_DeltaZ = flt_Measured_Z - STAR_TEACHING::TEACH_POSITION::TAUGHT_Z;
// }} ""
// {{{ 411 1 0 "119ece50_30ed_4f0e_8c6605fa3fd0ebaf" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
STATUS_UPDATE_CONTROLLER::SetStatusText(Translate("Deltas found:"), STAR_TEACHING::BOOL::FALSE, STAR_TEACHING::BOOL::TRUE, STAR_TEACHING::BOOL::TRUE);
// }} ""
// {{ 412 1 0 "25d3b789_82c8_45e3_96c94de7381ddf9b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (STAR_TEACHING::BOOL::SIMULATION_MODE == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 413 1 0 "8b79a294_341c_4b9a_b738fed33d7b1cfd" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_DeltaX = 0.0;
// }} ""
// {{ 414 1 0 "0776a12f_2d76_4593_ba0098c7da5aad0f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_DeltaY = 0.0;
// }} ""
// {{ 415 1 0 "9cb91b94_bad3_4207_bb1a357cf331f1d3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_DeltaZ = 0.0;
// }} ""
// {{ 416 1 0 "25d3b789_82c8_45e3_96c94de7381ddf9b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 417 1 0 "687480cc_3793_4f49_a2b1d59c6ab4d004" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_StatusX = StrConcat2(Translate("----- X:  "), o_flt_DeltaX);
// }} ""
// {{{ 418 1 0 "1263ddd8_1c9f_4498_82b9b660bc516e16" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_StatusY = StrConcat2(Translate("----- Y:  "), o_flt_DeltaY);
// }} ""
// {{{ 419 1 0 "8b20987c_574e_4d7e_aa8c76751c4d37f6" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_StatusZ = StrConcat2(Translate("----- Z:  "), o_flt_DeltaZ);
// }} ""
// {{{ 420 1 0 "cf1c6e27_b7e4_479d_ad868d82a18e0e72" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
STATUS_UPDATE_CONTROLLER::SetStatusText(str_StatusX, STAR_TEACHING::BOOL::FALSE, STAR_TEACHING::BOOL::TRUE, STAR_TEACHING::BOOL::FALSE);
// }} ""
// {{{ 421 1 0 "ab4a3d05_bed8_426b_90d6482b3b9d2e77" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
STATUS_UPDATE_CONTROLLER::SetStatusText(str_StatusY, STAR_TEACHING::BOOL::FALSE, STAR_TEACHING::BOOL::TRUE, STAR_TEACHING::BOOL::FALSE);
// }} ""
// {{{ 422 1 0 "fcf78711_b6ac_4bc9_97aeba66b447205d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
STATUS_UPDATE_CONTROLLER::SetStatusText(str_StatusZ, STAR_TEACHING::BOOL::FALSE, STAR_TEACHING::BOOL::TRUE, STAR_TEACHING::BOOL::FALSE);
// }} ""
Trace("----------------------------------------------------------");
Trace("");
Trace("     ","Delta X:  ",o_flt_DeltaX);
Trace("     ","Delta Y:  ",o_flt_DeltaY);
Trace("     ","Delta Z:  ",o_flt_DeltaZ);
Trace("");
Trace("----------------------------------------------------------");
// {{ 424 1 0 "dfe53360_d705_47ff_851ea7d541ad6e98" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_DeltaZ = o_flt_DeltaZ + STAR_TEACHING::TEACH_POSITION::OFFSET_Z;
// }} ""
// {{{ 425 1 0 "8ee4e532_2cd7_4cb8_83b2c7ad420de470" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_PlateLabID = SeqGetLabwareId(seq_TeachPlate);
// }} ""
// {{{ 426 1 0 "d0543640_f98f_45de_b2e32633b21b3c97" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::ADJUST_GetCurrentStack(ML_STAR, str_PlateLabID, arr_LabwareStack);
// }} ""
// {{ 427 1 0 "730b7142_dfee_4537_99051defdb1ffcbf" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
int_TotalInStack=arr_LabwareStack.GetSize();
// }} ""
// {{ 428 1 0 "d14b58ef_2948_4ed3_a82a9ff52f35acfe" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_TotalInStack == 0)
{
// }} ""
// {{ 429 1 0 "22d99d4f_ca67_4111_a540a7d0fd3167b9" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("===============================================================\nADJUST SINGLE LABWARE\n==============================================================="));
// }} ""
// {{{ 430 1 0 "d2b4a1ed_f8e3_416c_88bd7e0e70e7e534" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::ADJUST_SetRelativePosition(ML_STAR, seq_TeachPlate, o_flt_DeltaX, o_flt_DeltaY, flt_DeltaZ, 0.0);
// }} ""
// {{{ 431 1 0 "1eda9da8_4f43_4a40_92c3124963fa9f4a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::ADJUST_SetProperties(ML_STAR, seq_TeachPlate, STAR_TEACHING::TEACH_POSITION::PROPERTY_KEY_GROUP, Translate("1"));
// }} ""
// {{ 432 1 0 "d14b58ef_2948_4ed3_a82a9ff52f35acfe" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 433 1 0 "4b237c8c_778a_406a_b435d22a080e4443" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("===============================================================\nADJUST STACKED LABWARE\n==============================================================="));
// }} ""
// {{ 434 1 0 "eca8afb3_bc07_4b88_ae8800f6618bd336" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalInStack;)
{
i = i + 1;
// }} ""
Trace("Stack Plate Number:  ",i);
// {{{ 436 1 0 "cb72d600_84c3_4288_a793c06c95956bef" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::SEQ_GetDefaultSequence(ML_STAR, arr_LabwareStack.ElementAt( i -1), 1, seq_TeachPlate);
// }} ""
// {{{ 437 1 0 "477c5e1a_bf2a_4d5a_95e9e0131e588c61" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::ADJUST_SetRelativePosition(ML_STAR, seq_TeachPlate, o_flt_DeltaX, o_flt_DeltaY, flt_DeltaZ, 0.0);
// }} ""
// {{{ 438 1 0 "2c535290_dcda_448b_bdac2cc5bdf816c1" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LPQ::ADJUST_SetProperties(ML_STAR, seq_TeachPlate, STAR_TEACHING::TEACH_POSITION::PROPERTY_KEY_GROUP, Translate("1"));
// }} ""
// {{ 439 1 0 "eca8afb3_bc07_4b88_ae8800f6618bd336" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 440 1 0 "d14b58ef_2948_4ed3_a82a9ff52f35acfe" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 441 1 0 "67d53ee1_065b_4552_ac5afe0211a5540b" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_SafeHeight = flt_Measured_Z + flt_ContainerDepth;
// }} ""
// {{ 442 1 0 "051bfce5_62fc_4d31_b6753ee62f6f1073" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_SafeHeight = flt_SafeHeight + 5.0;
// }} ""
// {{{ 443 1 0 "66864d2d_58c6_46a4_9c3cc94581028541" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
MOVEMENT_CONTROLLER::MoveChannelToZCoord(ML_STAR, flt_SafeHeight);
// }} ""
// {{ 444 1 0 "0a67d373_a3ca_49c4_a0928ed124974b7e" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== MeasureLabwarePosition - FINISH"));
// }} ""
// {{{ 5 "MeasureLabwarePosition" "End"
}
// }} ""
// {{{ 5 "SaveTheDeck" "Begin"
function SaveTheDeck( device & ML_STAR ) void {
// }} ""
private timer WaitForLabware;
// {{ 5 "SaveTheDeck" "InitLocals"
// }} ""
// {{ 483 1 0 "647ce8cd_1475_437c_b71f69625e404e80" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== SaveTheDeck - START"));
// }} ""
// {{{ 484 1 0 "62caec91_a0fa_4f7f_95fcc29c65b50e1e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ResetLabwareVisState(ML_STAR);
// }} ""
// {{ 485 1 0 "96525ac4_2bbc_4e5a_b439d8c867bdefe7" "{B31F353E-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == WaitForLabware.SetTimer(2) )
{
    MECC::RaiseRuntimeErrorEx(-1355939584, MECC::IDS::stepNameTimerStart, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 486 1 0 "a2d3aa90_1867_436c_add7bd80a3d156a9" "{B31F353F-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == WaitForLabware.WaitTimer(hslFalse, hslFalse) )
{
    MECC::RaiseRuntimeErrorEx(-1339162368, MECC::IDS::stepNameTimerWait, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 487 1 0 "c2254554_5f45_41eb_8060714316fe19cb" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (STAR_TEACHING::BOOL::SIMULATION_MODE == STAR_TEACHING::BOOL::FALSE)
{
// }} ""
// {{{ 488 1 0 "60b436eb_4a90_40eb_93bda732d6d4f6c5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLLabwrAccess::SaveChangesToDecklayout(ML_STAR);
// }} ""
// {{ 489 1 0 "c2254554_5f45_41eb_8060714316fe19cb" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 490 1 0 "7d3acf0b_d9df_462c_808d7bd3181b58b8" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== SaveTheDeck - FINISH"));
// }} ""
// {{{ 5 "SaveTheDeck" "End"
}
// }} ""
// {{{ 5 "UpdateLogFile" "Begin"
function UpdateLogFile( device & ML_STAR, variable i_flt_DeltaX, variable i_flt_DeltaY, variable i_flt_DeltaZ, variable & o_str_LogFilePath ) void {
// }} ""
private variable str_DeckName;
private variable str_LogFilePath;
private variable str_DateTime;
private variable flt_DeltaX;
private variable flt_DeltaY;
private variable flt_New_X;
private variable flt_DeltaZ;
private variable flt_New_Y;
private variable flt_New_Z;
private variable str_Time;
private variable bool_FileExists;
private variable str_Date;
private variable str_TabName;
private variable flt_OffsetHeight;
private file WriteLog;
private sequence seq_Temp_TeachPosition;
private variable str_DeckDirectory;
// {{ 5 "UpdateLogFile" "InitLocals"
o_str_LogFilePath = 0;
// }} ""
// {{ 615 1 0 "da442f5c_5110_45f6_bf4a018434d83095" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== UpdateLogFile - START"));
// }} ""
// {{ 616 1 0 "b0761981_379b_4f57_93e3a57d33899d0e" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 617 1 0 "af8f506c_5979_420a_be946901dcadef49" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Directory::Create(STAR_TEACHING::LOG_PATH::TEACH_POSITION);
// }} ""
// {{{ 618 1 0 "00ab814d_0237_4ec0_8b9a4e62e538389b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_DeckName = HSLExtensions::File::GetFileNameWithoutExtension(STAR_TEACHING::STR::DECK_LAYOUT_PATH);
// }} ""
// {{{ 619 1 0 "b38ef62d_d900_4189_b04632b3cc7ef871" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_DeckDirectory = HSLExtensions::File::GetDirectoryName(STAR_TEACHING::STR::DECK_LAYOUT_PATH);
// }} ""
// {{{ 620 1 0 "e15f0215_e924_4053_a4d38c314f7f78ab" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
StrReplace(str_DeckName, Translate(" "), Translate("_"));
// }} ""
// {{{ 621 1 0 "55303a21_f8e1_4f8c_826269bc9654d1ce" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
StrReplace(str_DeckName, Translate("."), Translate("_"));
// }} ""
// {{ 622 1 0 "90df4c64_1228_4035_844eb04148feda91" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 623 1 0 "7f00c275_7764_4ebf_a53af46a3ad811af" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_DeckName = StrLeft(str_DeckName, 31);
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{{ 624 1 0 "ac70adfe_5493_4bed_b3de6901242b072b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LogFilePath = StrConcat4(STAR_TEACHING::LOG_PATH::TEACH_POSITION, str_DeckName, Translate(".xls"), Translate(""));
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 625 1 0 "0ebf37d8_a77e_4ded_bcfc27b3709118e4" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LogFilePath = StrConcat4(str_DeckDirectory, Translate("\\"), str_DeckName, Translate("_TEACH_LOG.xls"));
// }} ""
// {{ 626 1 0 "b0761981_379b_4f57_93e3a57d33899d0e" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 627 1 0 "195373aa_275c_41d6_a62d1ea04353c795" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_DeltaX = i_flt_DeltaX;
// }} ""
// {{ 628 1 0 "208e553d_51f3_42a7_bff60c6dfe21090f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_DeltaY = i_flt_DeltaY;
// }} ""
// {{ 629 1 0 "f575d1e7_ee4d_474c_95f79c0bc10890e0" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_DeltaZ = i_flt_DeltaZ;
// }} ""
// {{ 630 1 0 "cc902d5c_074e_4aa3_a1fa8dec1221c3b5" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_OffsetHeight = STAR_TEACHING::TEACH_POSITION::OFFSET_Z;
// }} ""
// {{ 631 1 0 "e2205a30_d829_4555_9a033177cbdf88b3" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("========================================\nSAVE CHANGES TO DECK LAYOUT\n========================================"));
// }} ""
// {{ 632 1 0 "0306ba89_7371_4bd0_8c697d39e915ea39" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 633 1 0 "42e2d1e3_8249_45d7_ba834876dca3faa0" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Date = TimGetFormattedDate(Translate("%m/%d/%Y"));
// }} ""
// {{{ 634 1 0 "2c7e57b2_9d73_433a_b09d5b77d3476db1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Time = TimGetFormattedTime(Translate("%H:%M"));
// }} ""
// {{{ 635 1 0 "ab0a1cae_6784_459d_91b195b905a35efc" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_DateTime = StrConcat4(str_Date, Translate(" "), str_Time, Translate(""));
// }} ""
// {{ 636 1 0 "0306ba89_7371_4bd0_8c697d39e915ea39" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 637 1 0 "d2054403_2888_4f5d_bb0cb15c7dcdd1a8" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_New_X = STAR_TEACHING::TEACH_POSITION::CURRENT_X + flt_DeltaX;
// }} ""
// {{ 638 1 0 "1ce3474d_2671_401b_9adfdc38c3eca472" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_New_Y = STAR_TEACHING::TEACH_POSITION::CURRENT_Y + flt_DeltaY;
// }} ""
// {{ 639 1 0 "ab316b5a_f8b3_4309_90ee7447072ea097" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_New_Z = STAR_TEACHING::TEACH_POSITION::CURRENT_Z + flt_DeltaZ;
// }} ""
// {{{ 640 1 0 "95b1b48b_9481_4c83_9396febdc96181b3" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bool_FileExists = HSLExtensions::File::Exists(str_LogFilePath);
// }} ""
// {{ 641 1 0 "8d4e8615_fad2_4cb0_b875a08963ea7a74" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_FileExists == STAR_TEACHING::BOOL::TRUE)
{
// }} ""
// {{ 642 1 0 "cca1fbe7_bbb0_4c73_a4c1d289d21852b2" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("========================================\nADD DATA TO AN EXISTING WORKSHEET\n========================================"));
// }} ""
// {{{ 643 1 0 "5d7d1e40_df1d_471d_80d8b23e94694f74" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
EDITFILEATTRIBUTES::Remove_ReadOnly(str_LogFilePath);
// }} ""
// {{{ 644 1 0 "de3c4380_9904_4b2e_871261cd630e9e04" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_TabName = StrConcat2(Translate("POSITION_TEACH_REPORT"), Translate("$"));
// }} ""
// {{ 645 1 0 "6cca31d9_7b23_4b6d_9f8e21034fe0c975" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
WriteLog.AddField("DATE_TIME", str_DateTime, hslString, 255);
WriteLog.AddField("PLATE_NAME", STAR_TEACHING::TEACH_POSITION::LAB_NAME, hslString, 255);
WriteLog.AddField("LABWARE_ID", STAR_TEACHING::TEACH_POSITION::LAB_ID, hslString, 255);
WriteLog.AddField("CARRIER_ID", STAR_TEACHING::TEACH_POSITION::CARRIER, hslString, 255);
WriteLog.AddField("CARRIER_SITE", STAR_TEACHING::TEACH_POSITION::SITE, hslString, 255);
WriteLog.AddField("ORIGINAL_X", STAR_TEACHING::TEACH_POSITION::CURRENT_X, hslFloat);
WriteLog.AddField("ORIGINAL_Y", STAR_TEACHING::TEACH_POSITION::CURRENT_Y, hslFloat);
WriteLog.AddField("ORIGINAL_Z", STAR_TEACHING::TEACH_POSITION::CURRENT_Z, hslFloat);
WriteLog.AddField("NEW_X", flt_New_X, hslFloat);
WriteLog.AddField("NEW_Y", flt_New_Y, hslFloat);
WriteLog.AddField("NEW_Z", flt_New_Z, hslFloat);
WriteLog.AddField("DELTA_X", flt_DeltaX, hslFloat);
WriteLog.AddField("DELTA_Y", flt_DeltaY, hslFloat);
WriteLog.AddField("DELTA_Z", flt_DeltaZ, hslFloat);
WriteLog.AddField("Z_OFFSET", flt_OffsetHeight, hslFloat);
if( 0 == WriteLog.Open(str_LogFilePath + " " + str_TabName, hslAppend) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, str_LogFilePath, "HxMetEdCompCmd");
}
// }} ""
// {{ 646 1 0 "8d4e8615_fad2_4cb0_b875a08963ea7a74" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 647 1 0 "704318c9_2bc7_4441_bf82554a43dc8c67" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("========================================\nCREATE A NEW FILE\n========================================"));
// }} ""
// {{ 648 1 0 "c5d31662_f77b_4f6b_ba53df56229d87c1" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_TabName = Translate("POSITION_TEACH_REPORT");
// }} ""
// {{ 649 1 0 "b9092720_2eb3_4350_bae2114575dbac60" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
WriteLog.AddField("DATE_TIME", str_DateTime, hslString, 255);
WriteLog.AddField("PLATE_NAME", STAR_TEACHING::TEACH_POSITION::LAB_NAME, hslString, 255);
WriteLog.AddField("LABWARE_ID", STAR_TEACHING::TEACH_POSITION::LAB_ID, hslString, 255);
WriteLog.AddField("CARRIER_ID", STAR_TEACHING::TEACH_POSITION::CARRIER, hslString, 255);
WriteLog.AddField("CARRIER_SITE", STAR_TEACHING::TEACH_POSITION::SITE, hslString, 255);
WriteLog.AddField("ORIGINAL_X", STAR_TEACHING::TEACH_POSITION::CURRENT_X, hslFloat);
WriteLog.AddField("ORIGINAL_Y", STAR_TEACHING::TEACH_POSITION::CURRENT_Y, hslFloat);
WriteLog.AddField("ORIGINAL_Z", STAR_TEACHING::TEACH_POSITION::CURRENT_Z, hslFloat);
WriteLog.AddField("NEW_X", flt_New_X, hslFloat);
WriteLog.AddField("NEW_Y", flt_New_Y, hslFloat);
WriteLog.AddField("NEW_Z", flt_New_Z, hslFloat);
WriteLog.AddField("DELTA_X", flt_DeltaX, hslFloat);
WriteLog.AddField("DELTA_Y", flt_DeltaY, hslFloat);
WriteLog.AddField("DELTA_Z", flt_DeltaZ, hslFloat);
WriteLog.AddField("Z_OFFSET", flt_OffsetHeight, hslFloat);
if( 0 == WriteLog.Open(str_LogFilePath + " " + str_TabName, hslWrite) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, str_LogFilePath, "HxMetEdCompCmd");
}
// }} ""
// {{ 650 1 0 "8d4e8615_fad2_4cb0_b875a08963ea7a74" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 651 1 0 "a59af0a6_be40_4f4d_91c62d1f1a0badbc" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (STAR_TEACHING::BOOL::SIMULATION_MODE == STAR_TEACHING::BOOL::FALSE)
{
// }} ""
// {{ 652 1 0 "86f87c82_80eb_497c_9e8e1a45da4fd3f8" "{B31F3537-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == WriteLog.WriteRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1473380096, MECC::IDS::stepNameFileWrite, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{ 653 1 0 "a59af0a6_be40_4f4d_91c62d1f1a0badbc" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 654 1 0 "6a45449f_beb3_4518_9dd083ce1db42a5a" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != WriteLog.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
WriteLog.RemoveFields();
// }} ""
// {{{ 655 1 0 "857a03cb_3cd7_4107_a88ccc207f1edbd4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
EDITFILEATTRIBUTES::Make_ReadOnly(str_LogFilePath);
// }} ""
// {{{ 656 1 0 "e5c52fd2_4b23_4c4f_b9f661e0cc7912b7" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqRemoveAll(seq_Temp_TeachPosition);
// }} ""
// {{{ 657 1 0 "6957f945_73ec_446f_b5a70a483f9f357b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqAdd(seq_Temp_TeachPosition, STAR_TEACHING::TEACH_POSITION::LAB_ID, STAR_TEACHING::TEACH_POSITION::TEACH_INDEX);
// }} ""
// {{ 658 1 0 "6d743b03_42bf_4aa4_b5ee4c12ee70b18b" "{B31F353A-5D80-11d4-A5EB-0050DA737D89}"
seq_Temp_TeachPosition.SetCurrentPosition(1);
// }} ""
// {{{ 659 1 0 "7f35e05e_f771_4078_b3415429b39649f3" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DeckVisualize::UpdateUsedPositions(ML_STAR, seq_Temp_TeachPosition, 4, Translate("Make positon flash"));
// }} ""
// {{ 660 1 0 "e370e540_7cf9_4093_afed6a7f1120d931" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_LogFilePath = str_LogFilePath;
// }} ""
// {{ 661 1 0 "ebbf0d8d_c7d7_4261_89770d69591c67d0" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("=================================== UpdateLogFile - FINISH"));
// }} ""
// {{{ 5 "UpdateLogFile" "End"
}
// }} ""
/* {{ 2 "SubmethodInsertLine" "" */ // }} ""
// {{{ 2 "LibraryNamespace" "End"
} // library namespace
// }} ""
// $$author=Orr_B$$valid=0$$time=2022-08-02 15:42$$checksum=37425e35$$length=082$$